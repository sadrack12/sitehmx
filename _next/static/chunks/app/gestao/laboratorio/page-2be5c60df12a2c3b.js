(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5358],{2894:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3008:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3523:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},9224:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},7619:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},6141:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5817:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6637:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},3030:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]])},4056:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},6264:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},290:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},9617:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1138:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2104:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2549:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3397:function(e,t,a){Promise.resolve().then(a.bind(a,9687))},9687:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var r=a(7437),s=a(2265),o=a(8565),l=a(4033),n=a(6141),i=a(8203),c=a(6264),d=a(3008),u=a(2104),x=a(3030),m=a(9883),h=a(1981),g=a(7619),p=a(290),b=a(6637),y=a(9617),f=a(5817),v=a(1138),j=a(9224),w=a(3523);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let N=(0,a(2898).Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);var k=a(3242),_=a(3930),S=a(9173),Z=a(5950),E=a(2549);function C(e){let{solicitacao:t,onClose:a,onSuccess:l}=e,{token:n}=(0,o.a)(),[i,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)({resultado:t.resultado||"",data_resultado:t.data_resultado||new Date().toISOString().split("T")[0],data_realizacao:new Date().toISOString().split("T")[0],status:"concluido",arquivo_resultado:null}),m=async e=>{if(e.preventDefault(),!u.resultado.trim()&&!u.arquivo_resultado){k.A.error("Preencha o resultado ou anexe um arquivo");return}d(!0);try{let e=new FormData;u.resultado.trim()&&e.append("resultado",u.resultado.trim()),u.data_resultado&&e.append("data_resultado",u.data_resultado),u.data_realizacao&&e.append("data_realizacao",u.data_realizacao),e.append("status",u.status),u.arquivo_resultado&&e.append("arquivo_resultado",u.arquivo_resultado);let r=await fetch("".concat("https://clamatec.com/api","/admin/laboratorio/").concat(t.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(n)},body:e});if(r.ok)k.A.success("Resultado inserido com sucesso!"),l(),a();else{let e=await r.json();k.A.error(e.message||"Erro ao inserir resultado")}}catch(e){console.error("Erro ao inserir resultado:",e),k.A.error("Erro ao inserir resultado")}finally{d(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Inserir Resultado"}),(0,r.jsx)("button",{onClick:a,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("form",{onSubmit:m,className:"p-4 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data do Resultado *"}),(0,r.jsx)("input",{type:"date",value:u.data_resultado,onChange:e=>{let t=e.target.value;x({...u,data_resultado:t,data_realizacao:t})},required:!0,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Resultado *"}),(0,r.jsx)("textarea",{value:u.resultado,onChange:e=>x({...u,resultado:e.target.value}),rows:6,placeholder:"Digite o resultado do exame...",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anexar Arquivo (opcional)"}),(0,r.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:e=>{var t;return x({...u,arquivo_resultado:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null})},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:a,className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:i||!u.resultado.trim()&&!u.arquivo_resultado,className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"w-3.5 h-3.5 animate-spin"}),"Salvando..."]}):"Salvar"})]})]})]})})}function A(){let{user:e,token:t,loading:a}=(0,o.a)(),E=(0,l.useRouter)(),[A,z]=(0,s.useState)([]),[q,R]=(0,s.useState)([]),[M,L]=(0,s.useState)(new Set),[U,O]=(0,s.useState)([]),[T,D]=(0,s.useState)([]),[I,B]=(0,s.useState)([]),[P,F]=(0,s.useState)([]),[G,V]=(0,s.useState)(!0),[H,J]=(0,s.useState)(!1),[X,W]=(0,s.useState)(null),[K,Q]=(0,s.useState)({consulta_id:"",paciente_id:"",exame_id:"",medico_solicitante_id:"",data_solicitacao:new Date().toISOString().split("T")[0],data_prevista_realizacao:"",data_realizacao:"",data_resultado:"",status:"solicitado",observacoes:"",resultado:"",arquivo_resultado:null,urgente:!1}),[Y,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(""),[ea,er]=(0,s.useState)(""),[es,eo]=(0,s.useState)(""),[el,en]=(0,s.useState)(""),[ei,ec]=(0,s.useState)({isOpen:!1,id:null}),[ed,eu]=(0,s.useState)(null),[ex,em]=(0,s.useState)(!1),[eh,eg]=(0,s.useState)(null);(0,s.useEffect)(()=>{a||e||E.push("/gestao/login")},[e,a,E]),(0,s.useEffect)(()=>{t&&(ev(),ep(),eb(),ey(),ef())},[t]);let ep=async()=>{try{let e=await fetch("".concat("https://clamatec.com/api","/pacientes"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();O(t.data||t||[])}}catch(e){console.error("Erro ao buscar pacientes:",e)}},eb=async()=>{try{let e=await fetch("".concat("https://clamatec.com/api","/admin/exames"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json(),a=(t.data||t||[]).filter(e=>e.ativo&&"laboratorio"===e.tipo);D(a)}}catch(e){console.error("Erro ao buscar exames:",e)}},ey=async()=>{try{let e=await fetch("".concat("https://clamatec.com/api","/admin/medicos"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();B((t.data||t||[]).map(e=>({id:e.id,nome:e.nome})))}}catch(e){console.error("Erro ao buscar m\xe9dicos:",e)}},ef=async()=>{try{let e=await fetch("".concat("https://clamatec.com/api","/consultas"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();F(t.data||t||[])}}catch(e){console.error("Erro ao buscar consultas:",e)}},ev=(0,s.useCallback)(async()=>{try{V(!0);let e=new URLSearchParams;ee&&e.append("search",ee),ea&&e.append("status",ea),es&&e.append("paciente_id",es),el&&e.append("urgente",el);let a=await fetch("".concat("https://clamatec.com/api","/admin/laboratorio?").concat(e.toString()),{headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){let e=await a.json(),t=e.data||e||[];z(t);let r=new Map;t.forEach(e=>{let t;if(e.bulk_group_id)t="bulk_".concat(e.bulk_group_id);else{let a=e.created_at?new Date(e.created_at).getTime():Date.now(),r=Math.floor(a/6e4);t=e.consulta_id?"consulta_".concat(e.consulta_id,"_").concat(r):"paciente_".concat(e.paciente_id,"_medico_").concat(e.medico_solicitante_id,"_").concat(r)}r.has(t)||r.set(t,[]),r.get(t).push(e)});let s=Array.from(r.entries()).map(e=>{let[t,a]=e;return{chave:t,solicitacoes:a,isGrupo:a.length>1,paciente:a[0].paciente,medico:a[0].medico_solicitante,data_solicitacao:a[0].data_solicitacao,consulta_id:a[0].consulta_id}});R(s);let o=new Set(s.filter(e=>e.isGrupo).map(e=>e.chave));L(o)}else k.A.error("Erro ao carregar solicita\xe7\xf5es de exames")}catch(e){console.error("Erro ao buscar solicita\xe7\xf5es:",e),k.A.error("Erro ao carregar solicita\xe7\xf5es de exames")}finally{V(!1)}},[t,ee,ea,es,el]);(0,s.useEffect)(()=>{ev()},[ev]),(0,s.useEffect)(()=>{let e=e=>{e.target.closest(".relative")||eu(null)};if(null!==ed)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[ed]);let ej=async e=>{e.preventDefault(),$(!0);try{let e=new FormData;Object.keys(K).forEach(t=>{let a=K[t];null!==a&&""!==a&&"arquivo_resultado"!==t&&e.append(t,a.toString())}),K.arquivo_resultado&&e.append("arquivo_resultado",K.arquivo_resultado);let a=X?"".concat("https://clamatec.com/api","/admin/laboratorio/").concat(X.id):"".concat("https://clamatec.com/api","/admin/laboratorio"),r=await fetch(a,{method:X?"PUT":"POST",headers:{Authorization:"Bearer ".concat(t)},body:e});if(r.ok)k.A.success(X?"Solicita\xe7\xe3o atualizada com sucesso!":"Solicita\xe7\xe3o criada com sucesso!"),J(!1),W(null),e_(),ev();else{let e=await r.json();k.A.error(e.message||"Erro ao salvar solicita\xe7\xe3o")}}catch(e){console.error("Erro ao salvar:",e),k.A.error("Erro ao salvar solicita\xe7\xe3o")}finally{$(!1)}},ew=e=>{var t;W(e),Q({consulta_id:(null===(t=e.consulta_id)||void 0===t?void 0:t.toString())||"",paciente_id:e.paciente_id.toString(),exame_id:e.exame_id.toString(),medico_solicitante_id:e.medico_solicitante_id.toString(),data_solicitacao:e.data_solicitacao,data_prevista_realizacao:e.data_prevista_realizacao||"",data_realizacao:e.data_realizacao||"",data_resultado:e.data_resultado||"",status:e.status,observacoes:e.observacoes||"",resultado:e.resultado||"",arquivo_resultado:null,urgente:e.urgente}),J(!0)},eN=async e=>{try{(await fetch("".concat("https://clamatec.com/api","/admin/laboratorio/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok?(k.A.success("Solicita\xe7\xe3o exclu\xedda com sucesso!"),ev()):k.A.error("Erro ao excluir solicita\xe7\xe3o")}catch(e){console.error("Erro ao excluir:",e),k.A.error("Erro ao excluir solicita\xe7\xe3o")}},ek=async e=>{try{let a=await fetch("".concat("https://clamatec.com/api","/admin/laboratorio/").concat(e,"/download"),{headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){let t=await a.blob(),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="resultado-exame-".concat(e,".pdf"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(r),document.body.removeChild(s)}else k.A.error("Erro ao baixar arquivo")}catch(e){console.error("Erro ao baixar:",e),k.A.error("Erro ao baixar arquivo")}},e_=()=>{Q({consulta_id:"",paciente_id:"",exame_id:"",medico_solicitante_id:"",data_solicitacao:new Date().toISOString().split("T")[0],data_prevista_realizacao:"",data_realizacao:"",data_resultado:"",status:"solicitado",observacoes:"",resultado:"",arquivo_resultado:null,urgente:!1})},eS=e=>{let t={solicitado:{bg:"bg-blue-100",text:"text-blue-800",icon:n.Z,label:"Solicitado"},agendado:{bg:"bg-yellow-100",text:"text-yellow-800",icon:i.Z,label:"Agendado"},em_andamento:{bg:"bg-purple-100",text:"text-purple-800",icon:c.Z,label:"Em Andamento"},concluido:{bg:"bg-green-100",text:"text-green-800",icon:d.Z,label:"Conclu\xeddo"},cancelado:{bg:"bg-red-100",text:"text-red-800",icon:u.Z,label:"Cancelado"}},a=t[e]||t.solicitado,s=a.icon;return(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium flex items-center gap-1 ".concat(a.bg," ").concat(a.text),children:[(0,r.jsx)(s,{className:"w-3 h-3"}),a.label]})};return a||G?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(c.Z,{className:"w-8 h-8 animate-spin text-green-600"})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(x.Z,{className:"w-8 h-8 text-green-600"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Laborat\xf3rio"})]}),(0,r.jsxs)("button",{onClick:()=>{e_(),W(null),J(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5"}),"Nova Solicita\xe7\xe3o"]})]}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),(0,r.jsx)("input",{type:"text",value:ee,onChange:e=>et(e.target.value),placeholder:"Paciente, exame, m\xe9dico...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsx)(S.Z,{value:ea,onChange:e=>er(e.target.value),options:[{value:"",label:"Todos"},{value:"solicitado",label:"Solicitado"},{value:"agendado",label:"Agendado"},{value:"em_andamento",label:"Em Andamento"},{value:"concluido",label:"Conclu\xeddo"},{value:"cancelado",label:"Cancelado"}]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paciente"}),(0,r.jsx)(S.Z,{value:es,onChange:e=>eo(e.target.value),options:[{value:"",label:"Todos"},...U.map(e=>({value:e.id.toString(),label:e.nome}))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urgente"}),(0,r.jsx)(S.Z,{value:el,onChange:e=>en(e.target.value),options:[{value:"",label:"Todos"},{value:"true",label:"Sim"},{value:"false",label:"N\xe3o"}]})]})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paciente"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Exame"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"M\xe9dico"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Data Solicita\xe7\xe3o"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Urgente"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===q.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Nenhuma solicita\xe7\xe3o encontrada"})}):q.map(e=>{var a,o,l,n,i,c,d;if(e.isGrupo){let a=M.has(e.chave),o=e.solicitacoes[0];return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("tr",{className:"bg-blue-50 hover:bg-blue-100 cursor-pointer transition-colors border-l-4 border-blue-600",onClick:()=>{let t=new Set(M);a?t.delete(e.chave):t.add(e.chave),L(t)},children:(0,r.jsx)("td",{className:"px-4 py-3",colSpan:7,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[a?(0,r.jsx)(j.Z,{className:"w-4 h-4 text-blue-600"}):(0,r.jsx)(w.Z,{className:"w-4 h-4 text-blue-600"}),(0,r.jsx)(N,{className:"w-4 h-4 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-blue-900",children:[e.solicitacoes.length," Exame(s) Solicitado(s) em Massa"]}),(0,r.jsxs)("div",{className:"text-xs text-blue-700 mt-0.5",children:["Paciente: ",null===(c=o.paciente)||void 0===c?void 0:c.nome," | M\xe9dico: ",null===(d=o.medico_solicitante)||void 0===d?void 0:d.nome," | Data: ",(0,Z.p6)(o.data_solicitacao,"dd/MM/yyyy")]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.solicitacoes.some(e=>e.urgente)&&(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 flex items-center gap-1",children:[(0,r.jsx)(h.Z,{className:"w-3 h-3"}),"Urgente"]}),(0,r.jsxs)("button",{onClick:async()=>{try{let a=e.solicitacoes.map(e=>e.id),r=await fetch("".concat("https://clamatec.com/api","/solicitacoes-exames/requisicao-massa"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({ids:a})});if(r.ok){let e=await r.blob(),t=window.URL.createObjectURL(e);window.open(t,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(t),100),k.A.success("Requisi\xe7\xe3o em massa gerada!")}else{let e=await r.json();k.A.error(e.message||"Erro ao gerar requisi\xe7\xe3o em massa")}}catch(e){console.error("Erro ao gerar requisi\xe7\xe3o em massa:",e),k.A.error("Erro ao gerar requisi\xe7\xe3o em massa")}},className:"px-2 py-1 rounded text-xs font-medium bg-green-600 text-white hover:bg-green-700 flex items-center gap-1 transition-colors",title:"Gerar Requisi\xe7\xe3o em Massa",children:[(0,r.jsx)(b.Z,{className:"w-3 h-3"}),"Gerar Requisi\xe7\xe3o"]}),(0,r.jsx)("span",{className:"text-xs text-blue-700",children:a?"Ocultar":"Expandir"})]})]})})}),a&&e.solicitacoes.map(e=>{var a,s,o,l,n;return(0,r.jsxs)("tr",{className:"bg-blue-25 hover:bg-blue-50 border-l-4 border-blue-300",children:[(0,r.jsxs)("td",{className:"px-4 py-2 pl-8",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:null===(a=e.paciente)||void 0===a?void 0:a.nome}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:null===(s=e.paciente)||void 0===s?void 0:s.nif})]}),(0,r.jsxs)("td",{className:"px-4 py-2",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:null===(o=e.exame)||void 0===o?void 0:o.nome}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:null===(l=e.exame)||void 0===l?void 0:l.codigo})]}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:null===(n=e.medico_solicitante)||void 0===n?void 0:n.nome})}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:(0,Z.p6)(e.data_solicitacao,"EEEE, dd/MM/yyyy")})}),(0,r.jsx)("td",{className:"px-4 py-2",children:eS(e.status)}),(0,r.jsx)("td",{className:"px-4 py-2",children:e.urgente?(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 flex items-center gap-1 w-fit",children:[(0,r.jsx)(h.Z,{className:"w-3 h-3"}),"Urgente"]}):(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"-"})}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["concluido"!==e.status&&(0,r.jsx)("button",{onClick:()=>{eg(e),em(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Inserir Resultado",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>eu(ed===e.id?null:e.id),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors relative",title:"Documentos",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})}),ed===e.id&&(0,r.jsx)("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[180px]",children:(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)("button",{onClick:async()=>{try{let a="".concat("https://clamatec.com/api","/solicitacoes-exames/").concat(e.id,"/requisicao"),r=await fetch(a,{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){let e=await r.blob(),t=window.URL.createObjectURL(e);window.open(t,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(t),100),eu(null),k.A.success("Requisi\xe7\xe3o gerada!")}}catch(e){console.error("Erro ao gerar requisi\xe7\xe3o:",e),k.A.error("Erro ao gerar requisi\xe7\xe3o")}},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"w-3.5 h-3.5"}),"Requisi\xe7\xe3o"]}),"concluido"===e.status&&e.resultado&&(0,r.jsxs)("button",{onClick:async()=>{try{let a="".concat("https://clamatec.com/api","/solicitacoes-exames/").concat(e.id,"/resultado"),r=await fetch(a,{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(r.ok){let e=await r.blob(),t=window.URL.createObjectURL(e);window.open(t,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(t),100),eu(null),k.A.success("Resultado gerado!")}}catch(e){console.error("Erro ao gerar resultado:",e),k.A.error("Erro ao gerar resultado")}},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(g.Z,{className:"w-3.5 h-3.5"}),"Resultado"]})]})})]}),(0,r.jsx)("button",{onClick:()=>ew(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Editar",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})}),e.arquivo_resultado&&(0,r.jsx)("button",{onClick:()=>ek(e.id),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Baixar Resultado",children:(0,r.jsx)(f.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>ec({isOpen:!0,id:e.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})})]})})]},e.id)})]},e.chave)}{let s=e.solicitacoes[0];return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-4 py-3",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null===(a=s.paciente)||void 0===a?void 0:a.nome}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:null===(o=s.paciente)||void 0===o?void 0:o.nif})]}),(0,r.jsxs)("td",{className:"px-4 py-3",children:[(0,r.jsx)("div",{className:"text-sm text-gray-900",children:null===(l=s.exame)||void 0===l?void 0:l.nome}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:null===(n=s.exame)||void 0===n?void 0:n.codigo})]}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:null===(i=s.medico_solicitante)||void 0===i?void 0:i.nome})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-gray-900",children:(0,Z.p6)(s.data_solicitacao,"EEEE, dd/MM/yyyy")})}),(0,r.jsx)("td",{className:"px-4 py-3",children:eS(s.status)}),(0,r.jsx)("td",{className:"px-4 py-3",children:s.urgente?(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 flex items-center gap-1 w-fit",children:[(0,r.jsx)(h.Z,{className:"w-3 h-3"}),"Urgente"]}):(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"-"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["concluido"!==s.status&&(0,r.jsx)("button",{onClick:()=>{eg(s),em(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Inserir Resultado",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>eu(ed===s.id?null:s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors relative",title:"Documentos",children:(0,r.jsx)(p.Z,{className:"w-4 h-4"})}),ed===s.id&&(0,r.jsx)("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[180px]",children:(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)("button",{onClick:async()=>{try{let e="".concat("https://clamatec.com/api","/solicitacoes-exames/").concat(s.id,"/requisicao"),a=await fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){let e=await a.blob(),t=window.URL.createObjectURL(e);window.open(t,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(t),100),eu(null),k.A.success("Requisi\xe7\xe3o gerada!")}}catch(e){console.error("Erro ao gerar requisi\xe7\xe3o:",e),k.A.error("Erro ao gerar requisi\xe7\xe3o")}},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"w-3.5 h-3.5"}),"Requisi\xe7\xe3o"]}),"concluido"===s.status&&s.resultado&&(0,r.jsxs)("button",{onClick:async()=>{try{let e="".concat("https://clamatec.com/api","/solicitacoes-exames/").concat(s.id,"/resultado"),a=await fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){let e=await a.blob(),t=window.URL.createObjectURL(e);window.open(t,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(t),100),eu(null),k.A.success("Resultado gerado!")}}catch(e){console.error("Erro ao gerar resultado:",e),k.A.error("Erro ao gerar resultado")}},className:"w-full px-3 py-2 text-left text-xs text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(g.Z,{className:"w-3.5 h-3.5"}),"Resultado"]})]})})]}),(0,r.jsx)("button",{onClick:()=>ew(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Editar",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})}),s.arquivo_resultado&&(0,r.jsx)("button",{onClick:()=>ek(s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Baixar Resultado",children:(0,r.jsx)(f.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>ec({isOpen:!0,id:s.id}),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})})]})})]},s.id)}})})]})})}),H&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:X?"Editar Solicita\xe7\xe3o":"Nova Solicita\xe7\xe3o"})}),(0,r.jsxs)("form",{onSubmit:ej,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consulta (Opcional)"}),(0,r.jsx)(S.Z,{value:K.consulta_id,onChange:e=>Q({...K,consulta_id:e.target.value}),options:[{value:"",label:"Selecione uma consulta"},...P.map(e=>{var t;return{value:e.id.toString(),label:"".concat((0,Z.p6)(e.data_consulta,"dd/MM/yyyy")," - ").concat(null===(t=e.paciente)||void 0===t?void 0:t.nome)}})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paciente *"}),(0,r.jsx)(S.Z,{value:K.paciente_id,onChange:e=>Q({...K,paciente_id:e.target.value}),options:[{value:"",label:"Selecione um paciente"},...U.map(e=>({value:e.id.toString(),label:"".concat(e.nome," - ").concat(e.nif)}))],required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exame *"}),(0,r.jsx)(S.Z,{value:K.exame_id,onChange:e=>Q({...K,exame_id:e.target.value}),options:[{value:"",label:"Selecione um exame"},...T.map(e=>({value:e.id.toString(),label:"".concat(e.nome," (").concat(e.codigo,")")}))],required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe9dico Solicitante *"}),(0,r.jsx)(S.Z,{value:K.medico_solicitante_id,onChange:e=>Q({...K,medico_solicitante_id:e.target.value}),options:[{value:"",label:"Selecione um m\xe9dico"},...I.map(e=>({value:e.id.toString(),label:e.nome}))],required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Solicita\xe7\xe3o *"}),(0,r.jsx)("input",{type:"date",value:K.data_solicitacao,onChange:e=>Q({...K,data_solicitacao:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Prevista Realiza\xe7\xe3o"}),(0,r.jsx)("input",{type:"date",value:K.data_prevista_realizacao,onChange:e=>Q({...K,data_prevista_realizacao:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),"solicitado"!==K.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Realiza\xe7\xe3o"}),(0,r.jsx)("input",{type:"date",value:K.data_realizacao,onChange:e=>Q({...K,data_realizacao:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),"concluido"===K.status&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Resultado"}),(0,r.jsx)("input",{type:"date",value:K.data_resultado,onChange:e=>Q({...K,data_resultado:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),(0,r.jsx)(S.Z,{value:K.status,onChange:e=>Q({...K,status:e.target.value}),options:[{value:"solicitado",label:"Solicitado"},{value:"agendado",label:"Agendado"},{value:"em_andamento",label:"Em Andamento"},{value:"concluido",label:"Conclu\xeddo"},{value:"cancelado",label:"Cancelado"}],required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"urgente",checked:K.urgente,onChange:e=>Q({...K,urgente:e.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,r.jsx)("label",{htmlFor:"urgente",className:"text-sm font-medium text-gray-700",children:"Urgente"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es"}),(0,r.jsx)("textarea",{value:K.observacoes,onChange:e=>Q({...K,observacoes:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),"concluido"===K.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resultado"}),(0,r.jsx)("textarea",{value:K.resultado,onChange:e=>Q({...K,resultado:e.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Digite o resultado do exame..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arquivo de Resultado"}),(0,r.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:e=>{var t;return Q({...K,arquivo_resultado:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"}),(null==X?void 0:X.arquivo_resultado)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Arquivo atual: ",X.arquivo_resultado]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{J(!1),W(null),e_()},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:Y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}),"Salvando..."]}):"Salvar"})]})]})]})}),(0,r.jsx)(_.Z,{isOpen:ei.isOpen,title:"Confirmar Exclus\xe3o",message:"Tem certeza que deseja excluir esta solicita\xe7\xe3o? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",onConfirm:()=>{ei.id&&eN(ei.id),ec({isOpen:!1,id:null})},onCancel:()=>ec({isOpen:!1,id:null})}),ex&&eh&&(0,r.jsx)(C,{solicitacao:eh,onClose:()=>{em(!1),eg(null)},onSuccess:()=>{ev()}})]})}},3930:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(7437),s=a(2894),o=a(2549);function l(e){let{isOpen:t,title:a,message:l,confirmText:n="Confirmar",cancelText:i="Cancelar",onConfirm:c,onCancel:d,type:u="danger"}=e;if(!t)return null;let x=(()=>{switch(u){case"danger":return{button:"bg-red-600 hover:bg-red-700 text-white",icon:"text-red-600",border:"border-red-200"};case"warning":return{button:"bg-yellow-600 hover:bg-yellow-700 text-white",icon:"text-yellow-600",border:"border-yellow-200"};default:return{button:"bg-blue-600 hover:bg-blue-700 text-white",icon:"text-blue-600",border:"border-blue-200"}}})();return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full border-2 border-gray-200 animate-in zoom-in-95 duration-200",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 ".concat(x.icon),children:(0,r.jsx)(s.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:a}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:l})]}),(0,r.jsx)("button",{onClick:d,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(o.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{onClick:d,className:"px-4 py-2 border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-semibold text-gray-700",children:i}),(0,r.jsx)("button",{onClick:c,className:"px-4 py-2 rounded-lg transition-colors font-semibold shadow-sm ".concat(x.button),children:n})]})]})})})}},9173:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(7437),s=a(3523);function o(e){let{children:t,label:a,error:o,icon:l,className:n="",options:i,...c}=e;return(0,r.jsxs)("div",{className:a?"w-full":"",children:[a&&(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[a,c.required&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[l&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none z-10",children:l}),(0,r.jsx)("select",{...c,className:"\n            ".concat(a?"w-full":"min-w-[140px]"," \n            ").concat(l?"pl-10":"pl-3"," \n            pr-10 \n            py-2.5 \n            border \n            border-gray-300 \n            rounded-lg \n            bg-white\n            text-sm\n            text-gray-900\n            font-medium\n            appearance-none\n            cursor-pointer\n            transition-all\n            duration-200\n            focus:ring-2 \n            focus:ring-green-500/50\n            focus:border-green-500 \n            outline-none\n            hover:border-gray-400\n            hover:bg-gray-50\n            disabled:bg-gray-100 \n            disabled:cursor-not-allowed\n            disabled:text-gray-500\n            disabled:border-gray-200\n            ").concat(o?"border-red-500 focus:border-red-500 focus:ring-red-500/50":"","\n            ").concat(n,"\n          "),children:i?i.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value)):t}),(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-500",children:(0,r.jsx)(s.Z,{className:"w-4 h-4"})})]}),o&&(0,r.jsxs)("p",{className:"mt-1.5 text-xs text-red-600 flex items-center gap-1",children:[(0,r.jsx)("span",{children:"âš "}),o]})]})}},3242:function(e,t,a){"use strict";a.d(t,{A:function(){return h},I:function(){return g}});var r=a(7437),s=a(2265),o=a(3008),l=a(1981),n=a(2894),i=a(4056),c=a(2549);let d=0,u=[],x=[],m=()=>{u.forEach(e=>e([...x]))},h={show:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r="toast-".concat(++d);return x.push({id:r,message:e,type:t,duration:a}),m(),a>0&&setTimeout(()=>{h.remove(r)},a),r},success:(e,t)=>h.show(e,"success",t),error:(e,t)=>h.show(e,"error",t),info:(e,t)=>h.show(e,"info",t),warning:(e,t)=>h.show(e,"warning",t),remove:e=>{x=x.filter(t=>t.id!==e),m()}};function g(){let[e,t]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=e=>{t(e)};return u.push(e),t([...x]),()=>{u=u.filter(t=>t!==e)}},[]);let a=e=>{switch(e){case"success":return(0,r.jsx)(o.Z,{className:"w-5 h-5 text-green-600"});case"error":return(0,r.jsx)(l.Z,{className:"w-5 h-5 text-red-600"});case"warning":return(0,r.jsx)(n.Z,{className:"w-5 h-5 text-yellow-600"});default:return(0,r.jsx)(i.Z,{className:"w-5 h-5 text-blue-600"})}},d=e=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return 0===e.length?null:(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md w-full",children:e.map(e=>(0,r.jsxs)("div",{className:"\n            ".concat(d(e.type),"\n            border-2 rounded-xl shadow-lg p-4 flex items-start gap-3\n            animate-in slide-in-from-right-full duration-300\n            backdrop-blur-sm\n          "),children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:a(e.type)}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("p",{className:"text-sm font-semibold break-words",children:e.message})}),(0,r.jsx)("button",{onClick:()=>e.remove(e.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]},e.id))})}},8565:function(e,t,a){"use strict";a.d(t,{H:function(){return i},a:function(){return c}});var r=a(7437),s=a(2265),o=a(4829);let l=window.__API_URL__||"https://clamatec.com/api",n=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),[u,x]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t||"undefined"===e||"null"===e||"undefined"===t||"null"===t||""===e.trim()||""===t.trim()){localStorage.removeItem("token"),localStorage.removeItem("user"),x(!1);return}try{let a=JSON.parse(t);if(a&&"object"==typeof a&&a.id)d(e),i(a);else throw Error("User object invalid")}catch(e){console.error("Erro ao fazer parse do usu\xe1rio do localStorage:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(e){console.error("Erro ao acessar localStorage:",e);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}}finally{x(!1)}},[]);let m=async(e,t)=>{try{let{token:a,user:r}=(await o.Z.post("".concat(l,"/login"),{email:e,password:t},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data;d(a),i(r),localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(r))}catch(e){var a,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Erro ao fazer login")}},h=async()=>{if(c)try{await o.Z.post("".concat(l,"/logout"),{},{headers:{Authorization:"Bearer ".concat(c)}})}catch(e){console.error("Erro ao fazer logout:",e)}d(null),i(null),localStorage.removeItem("token"),localStorage.removeItem("user")};return(0,r.jsx)(n.Provider,{value:{user:a,token:c,loading:u,login:m,logout:h},children:t})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},5950:function(e,t,a){"use strict";a.d(t,{cn:function(){return l},p6:function(){return o}});var r=a(3826),s=a(2836);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy";try{let a="string"==typeof e?new Date(e):e;return(0,r.WU)(a,t,{locale:s.F})}catch(t){return e.toString()}},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}},4033:function(e,t,a){e.exports=a(5313)}},function(e){e.O(0,[3803,8481,2971,4938,1744],function(){return e(e.s=3397)}),_N_E=e.O()}]);