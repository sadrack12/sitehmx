(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7293],{7216:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6264:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9617:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1138:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7590:function(e,t,a){Promise.resolve().then(a.bind(a,7239))},6993:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=a(1024)._(a(2265)).default.createContext(null)},7239:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(7437),s=a(2265),o=a(8565),n=a(4033),c=a(7504),i=a(6264),l=a(9883),d=a(9670),u=a(7216),m=a(9617),x=a(1138),h=a(6691),p=a.n(h);function g(){let{user:e,token:t,loading:a}=(0,o.a)(),h=(0,n.useRouter)(),[g,f]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0),[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[k,E]=(0,s.useState)({title:"",description:"",date:"",color:"",published:!0,order:0}),[S,T]=(0,s.useState)(null),[C,P]=(0,s.useState)(!1);(0,s.useEffect)(()=>{a||e?e&&"admin"!==e.role&&h.push("/gestao/dashboard"):h.push("/gestao/login")},[e,a,h]);let A=(0,s.useCallback)(async()=>{try{b(!0);let e=await c.h.get("/admin/noticias",t||void 0);f(e)}catch(e){console.error("Erro ao buscar not\xedcias:",e),alert("Erro ao carregar not\xedcias")}finally{b(!1)}},[t]);(0,s.useEffect)(()=>{e&&"admin"===e.role&&A()},[e,A]);let I=async e=>{e.preventDefault(),P(!0);try{let e=new FormData;e.append("title",k.title),e.append("description",k.description),e.append("date",k.date),e.append("color",k.color),e.append("published",k.published?"1":"0"),e.append("order",k.order.toString()),S&&e.append("image",S),N?await c.h.putFormData("/admin/noticias/".concat(N.id),e,t||void 0):await c.h.postFormData("/admin/noticias",e,t||void 0),await A(),z(),alert(N?"Not\xedcia atualizada com sucesso!":"Not\xedcia criada com sucesso!")}catch(e){console.error("Erro ao salvar not\xedcia:",e),alert(e.message||"Erro ao salvar not\xedcia")}finally{P(!1)}},Z=async e=>{if(confirm("Tem certeza que deseja deletar esta not\xedcia?"))try{await c.h.delete("/admin/noticias/".concat(e),t||void 0),await A(),alert("Not\xedcia deletada com sucesso!")}catch(e){console.error("Erro ao deletar not\xedcia:",e),alert("Erro ao deletar not\xedcia")}},_=e=>{w(e),E({title:e.title,description:e.description,date:e.date.split("T")[0],color:e.color||"",published:e.published,order:e.order}),v(!0)},z=()=>{E({title:"",description:"",date:"",color:"",published:!0,order:0}),T(null),w(null),v(!1)};return a||y?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-green-600"})}):(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Not\xedcias"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-0.5",children:"Gerencie as not\xedcias do site"})]}),(0,r.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Nova Not\xedcia"]})]}),j&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:N?"Editar Not\xedcia":"Nova Not\xedcia"}),(0,r.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"T\xedtulo"}),(0,r.jsx)("input",{type:"text",value:k.title,onChange:e=>E({...k,title:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Data"}),(0,r.jsx)("input",{type:"date",value:k.date,onChange:e=>E({...k,date:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none text-sm"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{value:k.description,onChange:e=>E({...k,description:e.target.value}),required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none text-sm"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Cor (Tailwind)"}),(0,r.jsx)("input",{type:"text",value:k.color,onChange:e=>E({...k,color:e.target.value}),placeholder:"from-green-100 to-green-200",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Ordem"}),(0,r.jsx)("input",{type:"number",value:k.order,onChange:e=>E({...k,order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 outline-none text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Imagem"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return T((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"published",checked:k.published,onChange:e=>E({...k,published:e.target.checked}),className:"w-4 h-4 text-green-600 focus:ring-green-500"}),(0,r.jsx)("label",{htmlFor:"published",className:"text-sm font-medium text-gray-700",children:"Publicado"})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,r.jsx)("button",{type:"submit",disabled:C,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors text-sm font-medium",children:C?"Salvando...":N?"Atualizar":"Criar"}),(0,r.jsx)("button",{type:"button",onClick:z,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",children:"Cancelar"})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"T\xedtulo"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Data"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Ordem"}),(0,r.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:g.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[e.image&&(0,r.jsx)(p(),{src:"".concat("https://clamatec.com/api".replace("/api",""),"/storage/").concat(e.image),alt:e.title,width:40,height:40,className:"rounded object-cover"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.title}),(0,r.jsx)("div",{className:"text-xs text-gray-500 line-clamp-1",children:e.description})]})]})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(e.date).toLocaleDateString("pt-AO")}),(0,r.jsx)("td",{className:"px-4 py-3",children:e.published?(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:[(0,r.jsx)(d.Z,{className:"w-3 h-3"}),"Publicado"]}):(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:[(0,r.jsx)(u.Z,{className:"w-3 h-3"}),"Rascunho"]})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.order}),(0,r.jsx)("td",{className:"px-4 py-3 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,r.jsx)("button",{onClick:()=>_(e),className:"p-1.5 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Editar",children:(0,r.jsx)(m.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>Z(e.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Deletar",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]})}},8565:function(e,t,a){"use strict";a.d(t,{H:function(){return i},a:function(){return l}});var r=a(7437),s=a(2265),o=a(4829);let n=window.__API_URL__||"https://clamatec.com/api",c=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,s.useState)(null),[l,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t||"undefined"===e||"null"===e||"undefined"===t||"null"===t||""===e.trim()||""===t.trim()){localStorage.removeItem("token"),localStorage.removeItem("user"),m(!1);return}try{let a=JSON.parse(t);if(a&&"object"==typeof a&&a.id)d(e),i(a);else throw Error("User object invalid")}catch(e){console.error("Erro ao fazer parse do usu\xe1rio do localStorage:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(e){console.error("Erro ao acessar localStorage:",e);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}}finally{m(!1)}},[]);let x=async(e,t)=>{try{let{token:a,user:r}=(await o.Z.post("".concat(n,"/login"),{email:e,password:t},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data;d(a),i(r),localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(r))}catch(e){var a,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Erro ao fazer login")}},h=async()=>{if(l)try{await o.Z.post("".concat(n,"/logout"),{},{headers:{Authorization:"Bearer ".concat(l)}})}catch(e){console.error("Erro ao fazer logout:",e)}d(null),i(null),localStorage.removeItem("token"),localStorage.removeItem("user")};return(0,r.jsx)(c.Provider,{value:{user:a,token:l,loading:u,login:x,logout:h},children:t})}function l(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7504:function(e,t,a){"use strict";a.d(t,{h:function(){return s}});let r=window.__API_URL__||"https://clamatec.com/api",s={get:async(e,t)=>{let a={"Content-Type":"application/json"};t&&(a.Authorization="Bearer ".concat(t));let s=await fetch("".concat(r).concat(e),{method:"GET",headers:a});if(!s.ok)throw Error("API Error: ".concat(s.statusText));return s.json()},post:async(e,t,a)=>{let s={"Content-Type":"application/json"};a&&(s.Authorization="Bearer ".concat(a));let o=await fetch("".concat(r).concat(e),{method:"POST",headers:s,body:JSON.stringify(t)});if(!o.ok)throw Error((await o.json().catch(()=>({message:o.statusText}))).message||"API Error: ".concat(o.statusText));return o.json()},put:async(e,t,a)=>{let s={"Content-Type":"application/json"};a&&(s.Authorization="Bearer ".concat(a));let o=await fetch("".concat(r).concat(e),{method:"PUT",headers:s,body:JSON.stringify(t)});if(!o.ok)throw Error((await o.json().catch(()=>({message:o.statusText}))).message||"API Error: ".concat(o.statusText));return o.json()},delete:async(e,t)=>{let a={"Content-Type":"application/json"};t&&(a.Authorization="Bearer ".concat(t));let s=await fetch("".concat(r).concat(e),{method:"DELETE",headers:a});if(!s.ok)throw Error("API Error: ".concat(s.statusText));return 204===s.status?null:s.json()},postFormData:async(e,t,a)=>{let s={};a&&(s.Authorization="Bearer ".concat(a));let o=await fetch("".concat(r).concat(e),{method:"POST",headers:s,body:t});if(!o.ok)throw Error((await o.json().catch(()=>({message:o.statusText}))).message||"API Error: ".concat(o.statusText));return o.json()},putFormData:async(e,t,a)=>{let s={};a&&(s.Authorization="Bearer ".concat(a));let o=await fetch("".concat(r).concat(e),{method:"POST",headers:{...s,"X-HTTP-Method-Override":"PUT"},body:t});if(!o.ok)throw Error((await o.json().catch(()=>({message:o.statusText}))).message||"API Error: ".concat(o.statusText));return o.json()}}},4033:function(e,t,a){e.exports=a(5313)}},function(e){e.O(0,[3803,6691,2971,4938,1744],function(){return e(e.s=7590)}),_N_E=e.O()}]);