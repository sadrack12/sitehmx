(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9285],{998:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},9057:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7158:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6538:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},6141:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6637:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},7810:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},8438:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},2882:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},5462:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]])},5750:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3133:function(e,t,s){Promise.resolve().then(s.bind(s,2204))},2204:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),r=s(2265),l=s(8565),n=s(4033),o=s(1396),i=s.n(o),c=s(5462),d=s(8203),u=s(9057),m=s(7810),g=s(5750),x=s(6538),h=s(8438),v=s(2882),y=s(6637),f=s(6141),b=s(998),p=s(3008),j=s(7158);function N(){var e,t,s,o,N,w,k,Z;let{user:C,loading:S}=(0,l.a)(),z=(0,n.useRouter)();(0,r.useEffect)(()=>{S||(null==C?void 0:C.role)!=="medico"||z.push("/gestao/medico/dashboard")},[C,S,z]);let[E,M]=(0,r.useState)(null),[_,I]=(0,r.useState)([]),[A,H]=(0,r.useState)({totalConsultas:0,consultasHoje:0,consultasPendentes:0,consultasRealizadas:0}),[P,R]=(0,r.useState)(null);(0,r.useEffect)(()=>{S||C?C&&"medico"===C.role?z.push("/gestao/medico/dashboard"):C&&"admin"!==C.role&&z.push("/gestao/consultas"):z.push("/gestao/login")},[C,S,z]),(0,r.useEffect)(()=>{C&&"admin"===C.role&&(T(),V())},[C]);let T=async()=>{try{let e=localStorage.getItem("token");if(!e)return;let t=await fetch("".concat("https://clamatec.com/api","/admin/dashboard"),{headers:{Authorization:"Bearer ".concat(e)}});if(403===t.status){console.error("Acesso negado: usu\xe1rio n\xe3o \xe9 admin"),z.push("/gestao/consultas");return}if(t.ok){let e=await t.json();M(e.stats),I(e.menu),R(e)}else console.error("Erro ao buscar estat\xedsticas do admin:",t.status)}catch(e){console.error("Erro ao buscar estat\xedsticas do admin:",e)}},V=async()=>{try{var e,t,s,a;let r=await fetch("".concat("https://clamatec.com/api","/consultas"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),l=await r.json(),n=new Date().toISOString().split("T")[0],o=(null===(e=l.data)||void 0===e?void 0:e.filter(e=>e.data_consulta===n).length)||0,i=(null===(t=l.data)||void 0===t?void 0:t.filter(e=>"agendada"===e.status||"confirmada"===e.status).length)||0,c=(null===(s=l.data)||void 0===s?void 0:s.filter(e=>"realizada"===e.status).length)||0;H({totalConsultas:(null===(a=l.data)||void 0===a?void 0:a.length)||0,consultasHoje:o,consultasPendentes:i,consultasRealizadas:c})}catch(e){console.error("Erro ao buscar estat\xedsticas de consultas:",e)}},q=e=>({newspaper:c.Z,calendar:d.Z,briefcase:u.Z,heart:m.Z,users:g.Z,"user-circle":x.Z,image:h.Z,"message-square":v.Z})[e]||y.Z;if(S)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Carregando..."})]})});if(!C)return null;let O=[{title:"Total",value:A.totalConsultas,icon:d.Z,bgColor:"bg-green-50",iconColor:"text-green-600"},{title:"Hoje",value:A.consultasHoje,icon:f.Z,bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Pendentes",value:A.consultasPendentes,icon:b.Z,bgColor:"bg-orange-50",iconColor:"text-orange-600"},{title:"Realizadas",value:A.consultasRealizadas,icon:p.Z,bgColor:"bg-green-50",iconColor:"text-green-600"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-1",children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Bem-vindo, ",null==C?void 0:C.name]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:O.map((e,t)=>{let s=e.icon;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:border-green-500 transition-colors",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsx)("div",{className:"".concat(e.bgColor," rounded-lg p-2.5"),children:(0,a.jsx)(s,{className:"w-5 h-5 ".concat(e.iconColor)})})}),(0,a.jsx)("div",{className:"text-2xl font-semibold text-gray-900 mb-1",children:e.value}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.title})]},t)})}),P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-2.5",children:(0,a.jsx)(g.Z,{className:"w-5 h-5 text-blue-600"})})}),(0,a.jsx)("div",{className:"text-2xl font-semibold text-gray-900 mb-1",children:(null===(e=P.pacientes)||void 0===e?void 0:e.total)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Pacientes"}),(0,a.jsxs)("div",{className:"text-xs text-green-600 mt-2",children:["+",(null===(t=P.pacientes)||void 0===t?void 0:t.novos_mes)||0," este m\xeas"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsx)("div",{className:"bg-purple-50 rounded-lg p-2.5",children:(0,a.jsx)(b.Z,{className:"w-5 h-5 text-purple-600"})})}),(0,a.jsx)("div",{className:"text-2xl font-semibold text-gray-900 mb-1",children:(null===(s=P.medicos)||void 0===s?void 0:s.total)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total de M\xe9dicos"}),(0,a.jsxs)("div",{className:"text-xs text-green-600 mt-2",children:[(null===(o=P.medicos)||void 0===o?void 0:o.ativos)||0," com agenda ativa"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-5",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsx)("div",{className:"bg-orange-50 rounded-lg p-2.5",children:(0,a.jsx)(y.Z,{className:"w-5 h-5 text-orange-600"})})}),(0,a.jsx)("div",{className:"text-2xl font-semibold text-gray-900 mb-1",children:(null===(N=P.exames)||void 0===N?void 0:N.total)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Exames"}),(0,a.jsxs)("div",{className:"text-xs text-yellow-600 mt-2",children:[(null===(w=P.exames)||void 0===w?void 0:w.pendentes)||0," pendentes"]})]})]}),(null===(k=P.consultas)||void 0===k?void 0:k.ultimos_meses)&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Consultas dos \xdaltimos 6 Meses"}),(0,a.jsx)("div",{className:"space-y-3",children:P.consultas.ultimos_meses.map((e,t)=>{let s=Math.max(...P.consultas.ultimos_meses.map(e=>e.total),1),r=s>0?e.total/s*100:0;return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-24 text-sm text-gray-600",children:e.mes}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"bg-gray-200 rounded-full h-6 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-green-600 h-full rounded-full transition-all duration-500 flex items-center justify-end pr-2",style:{width:"".concat(r,"%")},children:e.total>0&&(0,a.jsx)("span",{className:"text-xs text-white font-medium",children:e.total})})})}),(0,a.jsx)("div",{className:"w-12 text-right text-sm font-medium text-gray-900",children:e.total})]},t)})})]}),(null===(Z=P.consultas)||void 0===Z?void 0:Z.por_status)&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Consultas por Status"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(P.consultas.por_status).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium mb-2 ".concat({agendada:"bg-yellow-100 text-yellow-800",confirmada:"bg-blue-100 text-blue-800",realizada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"),children:{agendada:"Agendadas",confirmada:"Confirmadas",realizada:"Realizadas",cancelada:"Canceladas"}[t]||t}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s})]},t)})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Gest\xe3o de Conte\xfado"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:_.map((e,t)=>{let s=q(e.icon);return(0,a.jsxs)(i(),{href:"/gestao".concat(e.route),className:"bg-white rounded-lg border border-gray-200 p-4 hover:border-green-500 hover:bg-green-50 transition-all group flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-gray-50 group-hover:bg-green-100 rounded-lg p-2 transition-colors",children:(0,a.jsx)(s,{className:"w-5 h-5 text-gray-600 group-hover:text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.count," itens"]})]})]}),(0,a.jsx)(j.Z,{className:"w-5 h-5 text-gray-400 group-hover:text-green-600"})]},t)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(i(),{href:"/gestao/consultas",className:"bg-white rounded-lg border border-gray-200 p-6 hover:border-green-500 hover:bg-green-50 transition-all group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Consultas"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Gerencie todas as consultas agendadas"})]}),(0,a.jsx)(d.Z,{className:"w-8 h-8 text-green-600 group-hover:scale-110 transition-transform"})]})}),(0,a.jsx)(i(),{href:"/gestao/pacientes",className:"bg-white rounded-lg border border-gray-200 p-6 hover:border-green-500 hover:bg-green-50 transition-all group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Pacientes"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Gerencie o cadastro de pacientes"})]}),(0,a.jsx)(g.Z,{className:"w-8 h-8 text-green-600 group-hover:scale-110 transition-transform"})]})})]})]})}},8565:function(e,t,s){"use strict";s.d(t,{H:function(){return i},a:function(){return c}});var a=s(7437),r=s(2265),l=s(4829);let n=window.__API_URL__||"https://clamatec.com/api",o=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t||"undefined"===e||"null"===e||"undefined"===t||"null"===t||""===e.trim()||""===t.trim()){localStorage.removeItem("token"),localStorage.removeItem("user"),m(!1);return}try{let s=JSON.parse(t);if(s&&"object"==typeof s&&s.id)d(e),i(s);else throw Error("User object invalid")}catch(e){console.error("Erro ao fazer parse do usu\xe1rio do localStorage:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(e){console.error("Erro ao acessar localStorage:",e);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}}finally{m(!1)}},[]);let g=async(e,t)=>{try{let{token:s,user:a}=(await l.Z.post("".concat(n,"/login"),{email:e,password:t},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data;d(s),i(a),localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(a))}catch(e){var s,a;throw Error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Erro ao fazer login")}},x=async()=>{if(c)try{await l.Z.post("".concat(n,"/logout"),{},{headers:{Authorization:"Bearer ".concat(c)}})}catch(e){console.error("Erro ao fazer logout:",e)}d(null),i(null),localStorage.removeItem("token"),localStorage.removeItem("user")};return(0,a.jsx)(o.Provider,{value:{user:s,token:c,loading:u,login:g,logout:x},children:t})}function c(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[3803,1396,2971,4938,1744],function(){return e(e.s=3133)}),_N_E=e.O()}]);