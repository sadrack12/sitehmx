(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5736],{3523:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},3344:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},519:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},6245:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(2898).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},2671:function(e,a,s){Promise.resolve().then(s.bind(s,4509))},4509:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return w}});var t=s(7437),r=s(2265),i=s(8565),o=s(4033),n=s(6264),l=s(9883),c=s(7607),d=s(3344),m=s(8203),x=s(9670),g=s(9617),u=s(1138),h=s(3242),p=s(3930),f=s(9173),y=s(7552),b=s(2549),j=s(519),v=s(6245);function N(e){let{medico:a,onClose:s,onSuccess:o}=e,{token:n}=(0,i.a)(),[l,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(!1),[g,u]=(0,r.useState)(new Date(new Date().getFullYear(),new Date().getMonth()+1,1)),[p,f]=(0,r.useState)([{id:1,nome:"Segunda-feira",sigla:"Seg",ativo:!1},{id:2,nome:"Ter\xe7a-feira",sigla:"Ter",ativo:!1},{id:3,nome:"Quarta-feira",sigla:"Qua",ativo:!1},{id:4,nome:"Quinta-feira",sigla:"Qui",ativo:!1},{id:5,nome:"Sexta-feira",sigla:"Sex",ativo:!1},{id:6,nome:"S\xe1bado",sigla:"S\xe1b",ativo:!1},{id:0,nome:"Domingo",sigla:"Dom",ativo:!1}]);(0,r.useEffect)(()=>{y()},[a.id,g]);let y=async()=>{try{c(!0);let e=new Date(g.getFullYear(),g.getMonth(),1),s=[];for(let t=0;t<3;t++){let r=new Date(e.getFullYear(),e.getMonth()+t,1);try{let e=await fetch("".concat("https://clamatec.com/api","/admin/medico-horarios?medico_id=").concat(a.id,"&mes=").concat(r.toISOString().split("T")[0]),{headers:{Authorization:"Bearer ".concat(n)}});if(e.ok){let a=(await e.json()).data||[];s.push(...a)}}catch(e){console.error("Erro ao buscar hor\xe1rios do m\xeas ".concat(t+1,":"),e)}}console.log("Total de hor\xe1rios recebidos:",s.length),console.log("Hor\xe1rios recebidos do backend:",s);let t=new Set;s.length>0&&s.forEach(e=>{if(!0===e.disponivel)try{if("string"==typeof e.data){let[a,s,r]=(e.data.includes("T")?e.data.split("T")[0]:e.data).split("-").map(Number);if(a&&s&&r){let e=new Date(a,s-1,r).getDay();t.add(e)}}else if(e.data instanceof Date){let a=(0,e.data).getDay();t.add(a)}}catch(a){console.error("Erro ao processar data:",e.data,a)}}),console.log("Dias dispon\xedveis identificados (disponivel=true):",Array.from(t));let r=[{id:1,nome:"Segunda-feira",sigla:"Seg",ativo:!1},{id:2,nome:"Ter\xe7a-feira",sigla:"Ter",ativo:!1},{id:3,nome:"Quarta-feira",sigla:"Qua",ativo:!1},{id:4,nome:"Quinta-feira",sigla:"Qui",ativo:!1},{id:5,nome:"Sexta-feira",sigla:"Sex",ativo:!1},{id:6,nome:"S\xe1bado",sigla:"S\xe1b",ativo:!1},{id:0,nome:"Domingo",sigla:"Dom",ativo:!1}].map(e=>{let a=t.has(e.id);return{...e,ativo:a}});console.log("Dias atualizados:",r.map(e=>({nome:e.nome,id:e.id,ativo:e.ativo}))),f(r)}catch(e){console.error("Erro ao buscar hor\xe1rios:",e),h.A.error("Erro ao carregar hor\xe1rios existentes")}finally{c(!1)}},N=e=>{f(p.map(a=>a.id===e?{...a,ativo:!a.ativo}:a))},w=e=>{let a=new Date,s=e||new Date(a.getFullYear(),a.getMonth()+1,1),t=new Date(s.getFullYear(),s.getMonth(),1),r=new Date(s.getFullYear(),s.getMonth()+1,0),i=[],o=p.filter(e=>e.ativo);for(let e=new Date(t);e<=r;e.setDate(e.getDate()+1)){let a=e.getDay();o.find(e=>e.id===a)&&i.push(e.toISOString().split("T")[0])}return i},S=async e=>{e.preventDefault(),x(!0);try{let e=p.filter(e=>e.ativo);if(0===e.length){h.A.error("Selecione pelo menos um dia da semana"),x(!1);return}let t=new Date(g.getFullYear(),g.getMonth(),1),r=new Date(g.getFullYear(),g.getMonth()+1,0),i=[];for(let e=new Date(t);e<=r;e.setDate(e.getDate()+1))i.push(e.toISOString().split("T")[0]);let l=w(g),c=p.filter(e=>!e.ativo),d=[];for(let e of c)i.forEach(a=>{new Date(a).getDay()===e.id&&d.push(a)});let m=[],u=[],f=[];if(l.length>0)try{let e=await fetch("".concat("https://clamatec.com/api","/admin/medico-horarios/bulk"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({medico_id:a.id,datas:l,hora_inicio:null,hora_fim:null,disponivel:!0})});if(e.ok){let a=await e.json();m.push(...a.data||[])}else{let a=await e.json().catch(()=>({}));f.push("Erro ao salvar dias ativos: ".concat(a.message||"Erro desconhecido"))}}catch(e){f.push("Erro ao salvar dias ativos: ".concat(e.message))}if(d.length>0)try{let e=await fetch("".concat("https://clamatec.com/api","/admin/medico-horarios/bulk"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({medico_id:a.id,datas:d,hora_inicio:null,hora_fim:null,disponivel:!1})});if(e.ok){let a=await e.json();u.push(...a.data||[])}else{let a=await e.json().catch(()=>({}));f.push("Erro ao desativar dias: ".concat(a.message||"Erro desconhecido"))}}catch(e){f.push("Erro ao desativar dias: ".concat(e.message))}f.length>0?(console.error("Erros ao salvar agenda:",f),h.A.error("Alguns hor\xe1rios n\xe3o puderam ser salvos: ".concat(f.join(", ")))):(m.length,u.length,h.A.success("Agenda de trabalho salva com sucesso! ".concat(m.length," dia(s) ativado(s) e ").concat(u.length," dia(s) desativado(s).")),setTimeout(()=>{o(),s()},500))}catch(e){console.error("Erro ao salvar agenda:",e),h.A.error("Erro ao salvar agenda de trabalho: ".concat(e.message||"Erro desconhecido"))}finally{x(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"border-b border-gray-200 px-6 py-4 flex justify-between items-center sticky top-0 bg-white z-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Agenda de Trabalho"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:a.nome})]}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:(0,t.jsx)(b.Z,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:S,className:"p-6 space-y-4",children:[l?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(j.Z,{className:"w-8 h-8 animate-spin text-green-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Carregando hor\xe1rios..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Selecione os dias da semana e defina os hor\xe1rios de trabalho."}),(0,t.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aplicar agenda para o m\xeas:"}),(0,t.jsx)("input",{type:"month",value:"".concat(g.getFullYear(),"-").concat(String(g.getMonth()+1).padStart(2,"0")),onChange:e=>{let[a,s]=e.target.value.split("-").map(Number);u(new Date(a,s-1,1))},min:"".concat(new Date().getFullYear(),"-").concat(String(new Date().getMonth()+1).padStart(2,"0")),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Os hor\xe1rios ser\xe3o aplicados/atualizados para todos os dias selecionados neste m\xeas."})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,t.jsx)("div",{className:"p-4 border rounded-lg transition-colors ".concat(e.ativo?"border-green-500 bg-green-50":"border-gray-200 bg-gray-50"),children:(0,t.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"dia-".concat(e.id),checked:e.ativo,onChange:()=>N(e.id),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,t.jsx)("label",{htmlFor:"dia-".concat(e.id),className:"text-sm font-medium cursor-pointer ".concat(e.ativo?"text-green-900":"text-gray-700"),children:e.nome})]})})},e.id))}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Informa\xe7\xe3o"}),(0,t.jsx)("p",{children:"A agenda ser\xe1 aplicada/atualizada para o m\xeas selecionado. Os dias selecionados ser\xe3o marcados como dispon\xedveis para o m\xe9dico."})]})]})})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end pt-4 border-t border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:d||l,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors text-sm font-medium flex items-center gap-2",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{className:"w-4 h-4 animate-spin"}),"Salvando..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{className:"w-4 h-4"}),"Salvar Agenda"]})})]})]})]})})}function w(){let{user:e,token:a,loading:s}=(0,i.a)(),b=(0,o.useRouter)(),[j,v]=(0,r.useState)([]),[w,S]=(0,r.useState)([]),[k,E]=(0,r.useState)(!0),[C,D]=(0,r.useState)(!1),[_,A]=(0,r.useState)(!1),[Z,T]=(0,r.useState)(!1),[M,O]=(0,r.useState)(null),[z,F]=(0,r.useState)(null),[q,Y]=(0,r.useState)(null),[B,Q]=(0,r.useState)({nome:"",crm:"",especialidade:"",email:"",telefone:"",criar_login:!1,login_email:"",login_password:""}),[I,P]=(0,r.useState)(!1),[J,L]=(0,r.useState)({isOpen:!1,id:null});(0,r.useEffect)(()=>{s||e?e&&"admin"!==e.role&&b.push("/gestao/dashboard"):b.push("/gestao/login")},[e,s,b]),(0,r.useEffect)(()=>{a&&G()},[a]);let G=async()=>{try{let e=await fetch("".concat("https://clamatec.com/api","/admin/especialidades"),{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){let a=((await e.json()).data||[]).filter(e=>e.ativa);S(a)}}catch(e){console.error("Erro ao buscar especialidades:",e)}},H=(0,r.useCallback)(async()=>{try{E(!0);let e=await fetch("".concat("https://clamatec.com/api","/admin/medicos"),{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){let a=await e.json();v(a.data||a||[])}else h.A.error("Erro ao carregar m\xe9dicos")}catch(e){console.error("Erro ao buscar m\xe9dicos:",e),h.A.error("Erro ao carregar m\xe9dicos")}finally{E(!1)}},[a]);(0,r.useEffect)(()=>{e&&"admin"===e.role&&H()},[e,H]);let V=async e=>{e.preventDefault(),P(!0);try{let e=M?"".concat("https://clamatec.com/api","/admin/medicos/").concat(M.id):"".concat("https://clamatec.com/api","/admin/medicos"),s={nome:B.nome,crm:B.crm,especialidade:B.especialidade,email:B.email,telefone:B.telefone,criar_login:B.criar_login,login_email:B.login_email,login_password:B.login_password},t=await fetch(e,{method:M?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(s)});if(!t.ok){let e=await t.json();throw Error(e.message||"Erro ao salvar m\xe9dico")}let r=await t.json(),i=r.data||r;h.A.success(M?"M\xe9dico atualizado com sucesso!":"M\xe9dico criado com sucesso!"),await H(),K(),M||setTimeout(()=>{window.confirm("M\xe9dico criado com sucesso! Deseja definir a agenda de trabalho agora?")&&(Y(i),T(!0))},500)}catch(e){console.error("Erro ao salvar m\xe9dico:",e),h.A.error(e.message||"Erro ao salvar m\xe9dico")}finally{P(!1)}},R=async()=>{if(J.id)try{(await fetch("".concat("https://clamatec.com/api","/admin/medicos/").concat(J.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}})).ok?(h.A.success("M\xe9dico exclu\xeddo com sucesso!"),H()):h.A.error("Erro ao excluir m\xe9dico")}catch(e){h.A.error("Erro ao excluir m\xe9dico")}finally{L({isOpen:!1,id:null})}},U=e=>{var a;O(e),Q({nome:e.nome,crm:e.crm,especialidade:e.especialidade,email:e.email||"",telefone:e.telefone||"",criar_login:!1,login_email:(null===(a=e.user)||void 0===a?void 0:a.email)||"",login_password:""}),D(!0)},K=()=>{Q({nome:"",crm:"",especialidade:"",email:"",telefone:"",criar_login:!1,login_email:"",login_password:""}),O(null),D(!1)};return s||k?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)(n.Z,{className:"w-8 h-8 animate-spin text-green-600"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"M\xe9dicos"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie os m\xe9dicos do hospital"})]}),(0,t.jsxs)("button",{onClick:()=>D(!0),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[(0,t.jsx)(l.Z,{className:"w-5 h-5"}),"Novo M\xe9dico"]})]}),C&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:M?"Editar M\xe9dico":"Novo M\xe9dico"}),(0,t.jsxs)("form",{onSubmit:V,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[(0,t.jsx)(c.Z,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Informa\xe7\xf5es B\xe1sicas"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome Completo ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:B.nome,onChange:e=>Q({...B,nome:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm",placeholder:"Nome completo do m\xe9dico"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["N\xba Ordem ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:B.crm,onChange:e=>Q({...B,crm:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm",placeholder:"N\xfamero da Ordem"})]}),(0,t.jsx)("div",{className:"md:col-span-2",children:w.length>0?(0,t.jsxs)(f.Z,{label:"Especialidade",value:B.especialidade,onChange:e=>Q({...B,especialidade:e.target.value}),required:!0,icon:(0,t.jsx)(d.Z,{className:"w-4 h-4"}),children:[(0,t.jsx)("option",{value:"",children:"Selecione uma especialidade"}),w.map(e=>(0,t.jsx)("option",{value:e.nome,children:e.nome},e.id))]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Especialidade ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:B.especialidade,onChange:e=>Q({...B,especialidade:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm",placeholder:"Ex: Cardiologia, Pediatria, etc."}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Nenhuma especialidade cadastrada. Cadastre em"," ",(0,t.jsx)("a",{href:"/gestao/configuracoes/especialidades",className:"text-green-600 hover:underline",children:"Especialidades"})]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[(0,t.jsx)(c.Z,{className:"w-5 h-5 text-blue-600"}),(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Informa\xe7\xf5es de Contato"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",value:B.email,onChange:e=>Q({...B,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm",placeholder:"email@exemplo.com"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email de contato do m\xe9dico"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),(0,t.jsx)("input",{type:"tel",value:B.telefone,onChange:e=>Q({...B,telefone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm",placeholder:"+244 923 456 789"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Telefone de contato"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200",children:[(0,t.jsx)(c.Z,{className:"w-5 h-5 text-purple-600"}),(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Acesso ao Sistema"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,t.jsx)("input",{type:"checkbox",id:"criar_login",checked:B.criar_login,onChange:e=>Q({...B,criar_login:e.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{htmlFor:"criar_login",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Criar perfil de acesso (login)"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Permite que o m\xe9dico fa\xe7a login no sistema para acessar seu painel"})]})]}),B.criar_login&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-300",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email para Login ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"email",value:B.login_email,onChange:e=>Q({...B,login_email:e.target.value}),required:B.criar_login,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm bg-white",placeholder:"email@exemplo.com"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email usado para fazer login no sistema"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Senha ",!M&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"password",value:B.login_password,onChange:e=>Q({...B,login_password:e.target.value}),required:B.criar_login&&!M,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm bg-white",placeholder:M?"Deixe em branco para manter":"M\xednimo 6 caracteres"}),M?(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para manter a senha atual"}):(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"M\xednimo de 6 caracteres"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end pt-4 border-t border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:K,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:I,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors text-sm font-medium flex items-center gap-2",children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{className:"w-4 h-4 animate-spin"}),"Salvando..."]}):(0,t.jsx)(t.Fragment,{children:M?"Atualizar":"Salvar"})})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Nome"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"N\xba Ordem"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Especialidade"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Contato"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Acesso"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"A\xe7\xf5es"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===j.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:[(0,t.jsx)(c.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,t.jsx)("p",{children:"Nenhum m\xe9dico cadastrado"})]})}):j.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nome})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("div",{className:"text-sm text-gray-700",children:e.crm})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("div",{className:"text-sm text-gray-700",children:e.especialidade})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[e.email&&(0,t.jsx)("div",{children:e.email}),e.telefone&&(0,t.jsx)("div",{children:e.telefone}),!e.email&&!e.telefone&&(0,t.jsx)("span",{className:"text-gray-400",children:"-"})]})}),(0,t.jsx)("td",{className:"px-4 py-3",children:e.user?(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("span",{className:"text-xs text-green-700 font-medium",children:"Ativo"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.user.email,")"]})]}):(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Sem acesso"})}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{Y(e),T(!0)},className:"p-1.5 text-gray-600 hover:text-purple-600 hover:bg-purple-50 rounded transition-colors",title:"Definir agenda",children:(0,t.jsx)(m.Z,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{F(e),A(!0)},className:"p-1.5 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Ver detalhes",children:(0,t.jsx)(x.Z,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>U(e),className:"p-1.5 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Editar",children:(0,t.jsx)(g.Z,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>L({isOpen:!0,id:e.id}),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:(0,t.jsx)(u.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})}),j.length>0&&(0,t.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200",children:(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["Total: ",(0,t.jsx)("span",{className:"font-medium text-gray-900",children:j.length})," m\xe9dico",1!==j.length?"s":""]})})]}),_&&z&&(0,t.jsx)(y.Z,{medicoId:z.id,onClose:()=>{A(!1),F(null)},onEdit:()=>{A(!1),O(z),D(!0)}}),Z&&q&&(0,t.jsx)(N,{medico:q,onClose:()=>{T(!1),Y(null)},onSuccess:()=>{H()}}),(0,t.jsx)(p.Z,{isOpen:J.isOpen,title:"Confirmar Exclus\xe3o",message:"Tem certeza que deseja excluir este m\xe9dico? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",confirmText:"Excluir",cancelText:"Cancelar",type:"danger",onConfirm:R,onCancel:()=>L({isOpen:!1,id:null})})]})}},9173:function(e,a,s){"use strict";s.d(a,{Z:function(){return i}});var t=s(7437),r=s(3523);function i(e){let{children:a,label:s,error:i,icon:o,className:n="",options:l,...c}=e;return(0,t.jsxs)("div",{className:s?"w-full":"",children:[s&&(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[s,c.required&&(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[o&&(0,t.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none z-10",children:o}),(0,t.jsx)("select",{...c,className:"\n            ".concat(s?"w-full":"min-w-[140px]"," \n            ").concat(o?"pl-10":"pl-3"," \n            pr-10 \n            py-2.5 \n            border \n            border-gray-300 \n            rounded-lg \n            bg-white\n            text-sm\n            text-gray-900\n            font-medium\n            appearance-none\n            cursor-pointer\n            transition-all\n            duration-200\n            focus:ring-2 \n            focus:ring-green-500/50\n            focus:border-green-500 \n            outline-none\n            hover:border-gray-400\n            hover:bg-gray-50\n            disabled:bg-gray-100 \n            disabled:cursor-not-allowed\n            disabled:text-gray-500\n            disabled:border-gray-200\n            ").concat(i?"border-red-500 focus:border-red-500 focus:ring-red-500/50":"","\n            ").concat(n,"\n          "),children:l?l.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value)):a}),(0,t.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-500",children:(0,t.jsx)(r.Z,{className:"w-4 h-4"})})]}),i&&(0,t.jsxs)("p",{className:"mt-1.5 text-xs text-red-600 flex items-center gap-1",children:[(0,t.jsx)("span",{children:"âš "}),i]})]})}}},function(e){e.O(0,[3803,8481,8548,2971,4938,1744],function(){return e(e.s=2671)}),_N_E=e.O()}]);