(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8648],{1981:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2894:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3008:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3344:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]])},4056:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},6264:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9617:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1138:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2549:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8520:function(e,t,a){Promise.resolve().then(a.bind(a,8413))},8413:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),s=a(2265),n=a(8565),i=a(4033),c=a(6264),l=a(9883),o=a(3344),d=a(9617),u=a(1138),m=a(3242),x=a(3930);function h(){let{user:e,token:t,loading:a}=(0,n.a)(),h=(0,i.useRouter)(),[p,g]=(0,s.useState)([]),[f,y]=(0,s.useState)(!0),[b,v]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),[w,k]=(0,s.useState)({nome:"",descricao:"",ativa:!0,capacidade_diaria:10}),[E,Z]=(0,s.useState)(!1),[S,C]=(0,s.useState)({isOpen:!1,id:null});(0,s.useEffect)(()=>{a||e?e&&"admin"!==e.role&&h.push("/gestao/dashboard"):h.push("/gestao/login")},[e,a,h]),(0,s.useEffect)(()=>{t&&A()},[t]);let A=async()=>{try{let e=await fetch("".concat("https://clamatec.com/api","/admin/especialidades"),{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let t=await e.json();g(t.data||[])}}catch(e){m.A.error("Erro ao carregar especialidades")}finally{y(!1)}},z=async e=>{e.preventDefault(),Z(!0);try{let e=j?"".concat("https://clamatec.com/api","/admin/especialidades/").concat(j.id):"".concat("https://clamatec.com/api","/admin/especialidades"),a=await fetch(e,{method:j?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(w)});if(!a.ok){let e=await a.json();throw Error(e.message||"Erro ao salvar especialidade")}m.A.success(j?"Especialidade atualizada!":"Especialidade criada!"),M(),A()}catch(e){m.A.error(e.message||"Erro ao salvar especialidade")}finally{Z(!1)}},_=e=>{N(e),k({nome:e.nome,descricao:e.descricao||"",ativa:e.ativa,capacidade_diaria:e.capacidade_diaria||10}),v(!0)},I=async()=>{if(S.id)try{if((await fetch("".concat("https://clamatec.com/api","/admin/especialidades/").concat(S.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok)m.A.success("Especialidade removida!"),A();else throw Error("Erro ao remover especialidade")}catch(e){m.A.error("Erro ao remover especialidade")}finally{C({isOpen:!1,id:null})}},M=()=>{k({nome:"",descricao:"",ativa:!0,capacidade_diaria:10}),N(null),v(!1)};return a||f?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)(c.Z,{className:"w-8 h-8 animate-spin text-green-600"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Especialidades"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie as especialidades m\xe9dicas"})]}),(0,r.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium",children:[(0,r.jsx)(l.Z,{className:"w-5 h-5"}),"Nova Especialidade"]})]}),b&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:j?"Editar Especialidade":"Nova Especialidade"}),(0,r.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:w.nome,onChange:e=>k({...w,nome:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm",placeholder:"Ex: Cardiologia, Pediatria, etc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{value:w.descricao,onChange:e=>k({...w,descricao:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none resize-none text-sm",placeholder:"Descri\xe7\xe3o da especialidade..."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacidade Di\xe1ria (vagas por m\xe9dico)"}),(0,r.jsx)("input",{type:"number",value:w.capacidade_diaria,onChange:e=>k({...w,capacidade_diaria:parseInt(e.target.value)||10}),min:"1",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-1 focus:ring-green-500 focus:border-green-500 outline-none text-sm",placeholder:"10"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xfamero m\xe1ximo de consultas por m\xe9dico por dia"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 pt-6",children:[(0,r.jsx)("input",{type:"checkbox",id:"ativa",checked:w.ativa,onChange:e=>k({...w,ativa:e.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,r.jsx)("label",{htmlFor:"ativa",className:"text-sm font-medium text-gray-700",children:"Especialidade ativa"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors text-sm font-medium flex items-center gap-2",children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"w-4 h-4 animate-spin"}),"Salvando..."]}):(0,r.jsx)(r.Fragment,{children:j?"Atualizar":"Salvar"})})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Nome"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Descri\xe7\xe3o"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Capacidade Di\xe1ria"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===p.length?(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:[(0,r.jsx)(o.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),(0,r.jsx)("p",{children:"Nenhuma especialidade cadastrada"})]})}):p.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nome})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-gray-700",children:e.descricao||"-"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.capacidade_diaria||10," vagas/m\xe9dico"]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:e.ativa?(0,r.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:"Ativa"}):(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:"Inativa"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>_(e),className:"p-1.5 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Editar",children:(0,r.jsx)(d.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>C({isOpen:!0,id:e.id}),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),(0,r.jsx)(x.Z,{isOpen:S.isOpen,title:"Confirmar Exclus\xe3o",message:"Tem certeza que deseja excluir esta especialidade? Esta a\xe7\xe3o n\xe3o pode ser desfeita.",confirmText:"Excluir",cancelText:"Cancelar",type:"danger",onConfirm:I,onCancel:()=>C({isOpen:!1,id:null})})]})}},3930:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(7437),s=a(2894),n=a(2549);function i(e){let{isOpen:t,title:a,message:i,confirmText:c="Confirmar",cancelText:l="Cancelar",onConfirm:o,onCancel:d,type:u="danger"}=e;if(!t)return null;let m=(()=>{switch(u){case"danger":return{button:"bg-red-600 hover:bg-red-700 text-white",icon:"text-red-600",border:"border-red-200"};case"warning":return{button:"bg-yellow-600 hover:bg-yellow-700 text-white",icon:"text-yellow-600",border:"border-yellow-200"};default:return{button:"bg-blue-600 hover:bg-blue-700 text-white",icon:"text-blue-600",border:"border-blue-200"}}})();return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full border-2 border-gray-200 animate-in zoom-in-95 duration-200",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 ".concat(m.icon),children:(0,r.jsx)(s.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:a}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:i})]}),(0,r.jsx)("button",{onClick:d,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(n.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{onClick:d,className:"px-4 py-2 border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-semibold text-gray-700",children:l}),(0,r.jsx)("button",{onClick:o,className:"px-4 py-2 rounded-lg transition-colors font-semibold shadow-sm ".concat(m.button),children:c})]})]})})})}},3242:function(e,t,a){"use strict";a.d(t,{A:function(){return h},I:function(){return p}});var r=a(7437),s=a(2265),n=a(3008),i=a(1981),c=a(2894),l=a(4056),o=a(2549);let d=0,u=[],m=[],x=()=>{u.forEach(e=>e([...m]))},h={show:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,r="toast-".concat(++d);return m.push({id:r,message:e,type:t,duration:a}),x(),a>0&&setTimeout(()=>{h.remove(r)},a),r},success:(e,t)=>h.show(e,"success",t),error:(e,t)=>h.show(e,"error",t),info:(e,t)=>h.show(e,"info",t),warning:(e,t)=>h.show(e,"warning",t),remove:e=>{m=m.filter(t=>t.id!==e),x()}};function p(){let[e,t]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=e=>{t(e)};return u.push(e),t([...m]),()=>{u=u.filter(t=>t!==e)}},[]);let a=e=>{switch(e){case"success":return(0,r.jsx)(n.Z,{className:"w-5 h-5 text-green-600"});case"error":return(0,r.jsx)(i.Z,{className:"w-5 h-5 text-red-600"});case"warning":return(0,r.jsx)(c.Z,{className:"w-5 h-5 text-yellow-600"});default:return(0,r.jsx)(l.Z,{className:"w-5 h-5 text-blue-600"})}},d=e=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return 0===e.length?null:(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md w-full",children:e.map(e=>(0,r.jsxs)("div",{className:"\n            ".concat(d(e.type),"\n            border-2 rounded-xl shadow-lg p-4 flex items-start gap-3\n            animate-in slide-in-from-right-full duration-300\n            backdrop-blur-sm\n          "),children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:a(e.type)}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("p",{className:"text-sm font-semibold break-words",children:e.message})}),(0,r.jsx)("button",{onClick:()=>e.remove(e.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(o.Z,{className:"w-4 h-4"})})]},e.id))})}},8565:function(e,t,a){"use strict";a.d(t,{H:function(){return l},a:function(){return o}});var r=a(7437),s=a(2265),n=a(4829);let i=window.__API_URL__||"https://clamatec.com/api",c=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t||"undefined"===e||"null"===e||"undefined"===t||"null"===t||""===e.trim()||""===t.trim()){localStorage.removeItem("token"),localStorage.removeItem("user"),m(!1);return}try{let a=JSON.parse(t);if(a&&"object"==typeof a&&a.id)d(e),l(a);else throw Error("User object invalid")}catch(e){console.error("Erro ao fazer parse do usu\xe1rio do localStorage:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(e){console.error("Erro ao acessar localStorage:",e);try{localStorage.removeItem("token"),localStorage.removeItem("user")}catch(e){}}finally{m(!1)}},[]);let x=async(e,t)=>{try{let{token:a,user:r}=(await n.Z.post("".concat(i,"/login"),{email:e,password:t},{headers:{"Content-Type":"application/json"},withCredentials:!0})).data;d(a),l(r),localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(r))}catch(e){var a,r;throw Error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Erro ao fazer login")}},h=async()=>{if(o)try{await n.Z.post("".concat(i,"/logout"),{},{headers:{Authorization:"Bearer ".concat(o)}})}catch(e){console.error("Erro ao fazer logout:",e)}d(null),l(null),localStorage.removeItem("token"),localStorage.removeItem("user")};return(0,r.jsx)(c.Provider,{value:{user:a,token:o,loading:u,login:x,logout:h},children:t})}function o(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4033:function(e,t,a){e.exports=a(5313)}},function(e){e.O(0,[3803,2971,4938,1744],function(){return e(e.s=8520)}),_N_E=e.O()}]);