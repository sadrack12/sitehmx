(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8933],{6312:function(e,t,s){Promise.resolve().then(s.bind(s,7))},7:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n=s(7437),a=s(2265),r=s(4033),o=s(2481),c=s(6264),l=s(1981);function i(){let e=(0,r.useRouter)(),[t,s]=(0,a.useState)(!0),[i,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[f,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(!1),[N,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{{let e=window.location.pathname.split("/"),t=null,n=e.indexOf("consulta");if(n>=0&&n<e.length-1){let s=parseInt(e[n+1]);isNaN(s)||(t=s)}let a=new URLSearchParams(window.location.search),r=a.get("id");r&&!t&&(t=parseInt(r));let o=window.location.hash.match(/id=(\d+)/);if(o&&!t&&(t=parseInt(o[1])),!t||isNaN(t)){d("ID da consulta inv\xe1lido ou n\xe3o encontrado na URL"),s(!1);return}j(t);let c=a.get("nif");c?(h(c),setTimeout(()=>{y(null,c,t)},100)):s(!1)}},[]);let y=async(e,t,n)=>{e&&e.preventDefault();let a=n||N,r=t||x.trim();if(!a){d("ID da consulta n\xe3o encontrado");return}if(!r){d("Por favor, insira o seu NIF");return}s(!0),d(null);try{let e=await fetch("".concat("https://clamatec.com/api","/consultas/").concat(a,"/documentos?nif=").concat(encodeURIComponent(r)));if(!e.ok){404===e.status?d("Consulta n\xe3o encontrada ou NIF incorreto"):403===e.status?d("Acesso negado. Verifique se o NIF est\xe1 correto."):d("Erro ao verificar consulta. Tente novamente."),s(!1);return}let t=await e.json();t.validado?(m(r),g(t.consulta),b(!0)):d("NIF incorreto ou consulta n\xe3o encontrada"),s(!1)}catch(e){console.error("Erro ao validar NIF:",e),d("Erro ao conectar com o servidor. Tente novamente."),s(!1)}};return t&&!p?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(c.Z,{className:"w-12 h-12 animate-spin mx-auto mb-4 text-green-600"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Carregando..."})]})}):i&&!p?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,n.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[(0,n.jsx)(l.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,n.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Erro"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:i}),N&&(0,n.jsxs)("form",{onSubmit:e=>y(e),className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"nif",className:"block text-sm font-medium text-gray-700 mb-2",children:"Digite o seu NIF para acessar a videoconfer\xeancia:"}),(0,n.jsx)("input",{id:"nif",type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"NIF",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Acessar Videoconfer\xeancia"})]})]})}):N||p?p&&N&&f?(0,n.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,n.jsx)(o.Z,{consultaId:N,consulta:f,isOpen:p,onClose:()=>{b(!1),e.push("/")}})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,n.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Acessar Videoconfer\xeancia"}),(0,n.jsxs)("form",{onSubmit:e=>y(e),className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"nif",className:"block text-sm font-medium text-gray-700 mb-2",children:"Digite o seu NIF:"}),(0,n.jsx)("input",{id:"nif",type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"NIF",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,n.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Acessar Videoconfer\xeancia"})]})]})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,n.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[(0,n.jsx)(l.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,n.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"ID da Consulta Necess\xe1rio"}),(0,n.jsxs)("p",{className:"text-gray-600 mb-6",children:["Por favor, acesse esta p\xe1gina com um ID de consulta v\xe1lido na URL.",(0,n.jsx)("br",{}),"Formato: ",(0,n.jsx)("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:"/consulta-videoconferencia?id=123"})]})]})})}}},function(e){e.O(0,[2766,2971,4938,1744],function(){return e(e.s=6312)}),_N_E=e.O()}]);