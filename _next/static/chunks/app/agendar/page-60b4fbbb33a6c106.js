(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6450],{2898:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,a)=>{let t=(0,s.forwardRef)(({color:t="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,...m},u)=>(0,s.createElement)("svg",{ref:u,...r,width:l,height:l,stroke:t,strokeWidth:o?24*Number(i)/Number(l):i,className:["lucide",`lucide-${n(e)}`,c].join(" "),...m},[...a.map(([e,a])=>(0,s.createElement)(e,a)),...Array.isArray(d)?d:[d]]));return t.displayName=`${e}`,t}},2894:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3008:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3523:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},1291:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7158:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4056:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},519:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},1827:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7607:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]])},7972:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8339:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},2549:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1352:function(e,a,t){Promise.resolve().then(t.bind(t,3680))},3680:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var s=t(7437),r=t(2265),n=t(3008),l=t(7607),i=t(8203),o=t(1827),c=t(519),d=t(7972),m=t(1981),u=t(1291),x=t(7158),g=t(8339),h=t(3242),p=t(9173),b=t(5950);function f(){let[e,a]=(0,r.useState)(1),[t,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),[w,k]=(0,r.useState)([]),[_,Z]=(0,r.useState)([]),[E,C]=(0,r.useState)(!1),[S,A]=(0,r.useState)(null),[O,D]=(0,r.useState)(""),[M,P]=(0,r.useState)(null),[T,F]=(0,r.useState)(!1),[I,q]=(0,r.useState)(1),[L,V]=(0,r.useState)({paciente_id:"",nome:"",nif:"",email:"",telefone:"",data_nascimento:"",especialidade:"",data_consulta:"",observacoes:"",consulta_online:!1});(0,r.useEffect)(()=>{R()},[]),(0,r.useEffect)(()=>{L.especialidade&&3===e?z(L.especialidade):Z([]),q(1)},[L.especialidade,e]),(0,r.useEffect)(()=>{L.paciente_id&&L.especialidade&&L.data_consulta&&3===e?J():P(null)},[L.paciente_id,L.especialidade,L.data_consulta,e]);let R=async()=>{try{let e=await fetch("".concat("https://clamatec.com/api","/especialidades"));if(e.ok){let a=await e.json(),t=a.data||a||[];k(t)}else h.A.error("Erro ao buscar especialidades")}catch(e){console.error("Erro ao buscar especialidades:",e),h.A.error("Erro ao buscar especialidades. Tente novamente.")}},z=async e=>{try{C(!0);let a=new Date,t=[];for(let s=0;s<3;s++){let r=new Date(a.getFullYear(),a.getMonth()+s,1),n="".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"));try{let a=await fetch("".concat("https://clamatec.com/api","/especialidade-disponibilidade?especialidade=").concat(encodeURIComponent(e),"&mes=").concat(n));if(a.ok){let e=await a.json();e.data&&Array.isArray(e.data)&&t.push(...e.data)}}catch(e){console.error("Erro ao buscar disponibilidade para o m\xeas ".concat(n,":"),e)}}let s=a.toISOString().split("T")[0],r=t.filter(e=>e.data>=s);r.sort((e,a)=>e.data.localeCompare(a.data)),Z(r)}catch(e){console.error("Erro ao buscar disponibilidade:",e),h.A.error("Erro ao buscar datas dispon\xedveis. Tente novamente.")}finally{C(!1)}},$=e=>e.replace(/\D/g,"").slice(0,9),U=e=>{let a=e.replace(/\D/g,"");return a.length<=9?a:a.slice(0,9)},J=async()=>{if(!L.paciente_id||!L.especialidade||!L.data_consulta){P(null);return}try{F(!0);let e=await fetch("".concat("https://clamatec.com/api","/verificar-consulta-existente"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paciente_id:parseInt(L.paciente_id),especialidade:L.especialidade,data_consulta:L.data_consulta})});if(e.ok){let a=await e.json();a.existe?P(a.consulta):P(null)}else P(null)}catch(e){console.error("Erro ao verificar consulta existente:",e),P(null)}finally{F(!1)}},W=async()=>{if(!O||O.length<9){h.A.error("Por favor, digite um NIF v\xe1lido (9 d\xedgitos)");return}j(!0);try{let e=await fetch("".concat("https://clamatec.com/api","/buscar-paciente"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nif:O})}),t=await e.json();t.encontrado?(N(t.paciente),V({...L,paciente_id:t.paciente.id.toString(),nome:t.paciente.nome,nif:t.paciente.nif,email:t.paciente.email||"",telefone:t.paciente.telefone||"",data_nascimento:t.paciente.data_nascimento||""}),h.A.success("Paciente encontrado! Prosseguindo para agendamento..."),a(3)):(V({...L,nif:O}),a(2))}catch(e){console.error("Erro ao validar NIF:",e),h.A.error("Erro ao validar NIF. Tente novamente.")}finally{j(!1)}},B=async e=>{e.preventDefault(),f(!0);try{let e=await fetch("".concat("https://clamatec.com/api","/criar-paciente"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nome:L.nome,nif:L.nif,email:L.email,telefone:L.telefone,data_nascimento:L.data_nascimento})});if(e.ok){let t=await e.json();N(t.paciente),V({...L,paciente_id:t.paciente.id.toString()}),h.A.success("Paciente cadastrado com sucesso!"),a(3)}else{let a=await e.json(),t=a.errors?Object.values(a.errors).flat().join(", "):a.message||"Erro ao cadastrar paciente";h.A.error(t)}}catch(e){console.error("Erro ao cadastrar paciente:",e),h.A.error("Erro ao cadastrar paciente. Tente novamente.")}finally{f(!1)}},Y=async e=>{if(e.preventDefault(),!L.telefone||""===L.telefone.trim()){h.A.error("Por favor, preencha o campo telefone");return}if(!L.email||""===L.email.trim()){h.A.error("Por favor, preencha o campo email");return}f(!0);try{let e=await fetch("".concat("https://clamatec.com/api","/agendar"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paciente_id:L.paciente_id?parseInt(L.paciente_id):null,nome:L.nome,nif:L.nif,email:L.email,telefone:L.telefone||"",data_nascimento:L.data_nascimento||null,especialidade:L.especialidade,data_consulta:L.data_consulta,observacoes:L.observacoes||"",consulta_online:L.consulta_online||!1})});if(e.ok){let t=await e.json();t.medico_atribuido&&A(t.medico_atribuido),h.A.success("Consulta agendada com sucesso!"),a(4),D(""),N(null),V({paciente_id:"",nome:"",nif:"",email:"",telefone:"",data_nascimento:"",especialidade:"",data_consulta:"",observacoes:"",consulta_online:!1})}else{let a=await e.json();console.error("Erro ao agendar consulta:",a);let t=a.errors?Object.values(a.errors).flat().join(", "):a.message||"Erro ao agendar consulta";h.A.error(t)}}catch(e){console.error("Erro ao agendar consulta:",e),h.A.error(e.message||"Erro ao agendar consulta. Tente novamente.")}finally{f(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Agendar Consulta"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Preencha os dados abaixo para agendar sua consulta"})]}),(0,s.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full ".concat(e>=1?"bg-green-600 text-white":"bg-gray-200 text-gray-600"),children:e>1?(0,s.jsx)(n.Z,{className:"w-6 h-6"}):"1"}),(0,s.jsx)("div",{className:"w-20 h-1 ".concat(e>=2?"bg-green-600":"bg-gray-200")}),(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full ".concat(e>=2?"bg-green-600 text-white":"bg-gray-200 text-gray-600"),children:e>2?(0,s.jsx)(n.Z,{className:"w-6 h-6"}):"2"}),(0,s.jsx)("div",{className:"w-20 h-1 ".concat(e>=3?"bg-green-600":"bg-gray-200")}),(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full ".concat(e>=3?"bg-green-600 text-white":"bg-gray-200 text-gray-600"),children:e>3?(0,s.jsx)(n.Z,{className:"w-6 h-6"}):"3"})]})}),4===e?(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4",children:(0,s.jsx)(n.Z,{className:"w-10 h-10 text-green-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Consulta Agendada com Sucesso!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Sua consulta foi agendada. Voc\xea receber\xe1 uma confirma\xe7\xe3o por email."})]}),S&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-green-900 mb-3",children:"Detalhes da Consulta"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-green-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"M\xe9dico:"})," ",S.nome]}),S.crm&&(0,s.jsxs)("span",{className:"text-green-600",children:["(N\xba Ordem: ",S.crm,")"]})]}),L.especialidade&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Especialidade:"})," ",L.especialidade]})]}),L.data_consulta&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Data:"})," ",(0,b.p6)(L.data_consulta,"EEEE, dd/MM/yyyy")]})]})]})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("button",{onClick:()=>{a(1),D(""),A(null),window.location.href="/"},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"Voltar para o In\xedcio"})})]}):(0,s.jsxs)(s.Fragment,{children:[1===e&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(o.Z,{className:"w-6 h-6 text-green-600"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Verificar NIF"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Digite seu NIF *"}),(0,s.jsx)("input",{type:"text",value:O,onChange:e=>D($(e.target.value)),maxLength:9,placeholder:"000000000",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all text-center text-lg",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),W())}}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Digite seu NIF para verificar se j\xe1 est\xe1 cadastrado"})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)("button",{type:"button",onClick:W,disabled:y||!O||O.length<9,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}),"Verificando..."]}):(0,s.jsxs)(s.Fragment,{children:["Verificar",(0,s.jsx)(o.Z,{className:"w-5 h-5"})]})})})]})]}),2===e&&(0,s.jsxs)("form",{onSubmit:B,className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-green-600"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Dados Pessoais"})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("p",{className:"text-sm text-blue-900",children:"NIF n\xe3o encontrado. Por favor, complete seu cadastro para continuar."})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),(0,s.jsx)("input",{type:"text",value:L.nome,onChange:e=>V({...L,nome:e.target.value}),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NIF *"}),(0,s.jsx)("input",{type:"text",value:L.nif,onChange:e=>V({...L,nif:$(e.target.value)}),required:!0,maxLength:9,placeholder:"000000000",disabled:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg bg-gray-50 text-gray-600"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,s.jsx)("input",{type:"email",value:L.email,onChange:e=>V({...L,email:e.target.value}),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),(0,s.jsx)("input",{type:"tel",value:L.telefone,onChange:e=>V({...L,telefone:U(e.target.value)}),required:!0,maxLength:9,placeholder:"900000000",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento *"}),(0,s.jsx)("input",{type:"date",value:L.data_nascimento,onChange:e=>V({...L,data_nascimento:e.target.value}),required:!0,max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{a(1),D("")},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold",children:"Voltar"}),(0,s.jsx)("button",{type:"submit",disabled:t,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}),"Cadastrando..."]}):(0,s.jsxs)(s.Fragment,{children:["Cadastrar e Continuar",(0,s.jsx)(n.Z,{className:"w-5 h-5"})]})})]})]}),3===e&&(0,s.jsxs)("form",{onSubmit:Y,className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(i.Z,{className:"w-6 h-6 text-green-600"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Dados da Consulta"})]}),v&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("h3",{className:"text-sm font-semibold text-green-900",children:"Paciente"})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-green-800",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:v.nome})," - NIF: ",v.nif]}),(!L.telefone||!L.email)&&(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-3 mt-3",children:[(0,s.jsx)("p",{className:"text-xs text-yellow-900 font-semibold mb-2",children:"Complete seus dados de contato:"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-yellow-900 mb-1",children:"Telefone *"}),(0,s.jsx)("input",{type:"tel",value:L.telefone,onChange:e=>V({...L,telefone:U(e.target.value)}),required:!0,maxLength:9,placeholder:"900000000",className:"w-full px-3 py-2 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-yellow-900 mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",value:L.email,onChange:e=>V({...L,email:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 text-sm"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especialidade *"}),(0,s.jsx)(p.Z,{value:L.especialidade,onChange:e=>{V({...L,especialidade:e.target.value,data_consulta:""})},options:[{value:"",label:"Selecione uma especialidade..."},...w.map(e=>({value:e.nome,label:e.nome}))]})]}),L.especialidade&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Selecione a Data da Consulta *"}),E?(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 text-blue-700",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Carregando datas dispon\xedveis..."})]})}):0===_.length?(0,s.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3 text-amber-800",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-semibold mb-1",children:"Nenhum dia dispon\xedvel"}),(0,s.jsx)("p",{className:"text-xs",children:"N\xe3o h\xe1 datas dispon\xedveis cadastradas para esta especialidade. Verifique se os m\xe9dicos t\xeam agenda de trabalho configurada."})]})]})}):(0,s.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4 pb-3 border-b border-gray-200",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsxs)("h3",{className:"text-base font-semibold text-gray-900",children:["Datas Dispon\xedveis - ",L.especialidade]}),(0,s.jsxs)("span",{className:"ml-auto text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:[_.length," data",1!==_.length?"s":""," dispon\xedvel",1!==_.length?"eis":""]})]}),(()=>{let e=(I-1)*4,a=_.slice(e,e+4),t=Math.ceil(_.length/4);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:a.map((e,a)=>{let t=L.data_consulta===e.data,r=new Date().toISOString().split("T")[0],l=e.data<r,o=e.total_vagas-e.consultas_marcadas;return(0,s.jsxs)("div",{className:"relative flex flex-col p-3 rounded-lg border-2 transition-all ".concat(t?"bg-green-50 border-green-500 shadow-md":l||o<=0?"bg-gray-50 border-gray-300 opacity-50 cursor-not-allowed":"bg-white border-gray-200 hover:border-blue-400 hover:shadow-md cursor-pointer"),onClick:()=>{!l&&o>0&&V({...L,data_consulta:e.data})},children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 ".concat(t?"text-green-600":"text-blue-600")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-bold ".concat(t?"text-green-900":"text-gray-900"),children:(0,b.p6)(e.data,"EEEE, dd/MM/yyyy")}),e.total_medicos>0&&(0,s.jsxs)("div",{className:"text-xs text-gray-600 mt-0.5",children:[e.total_medicos," m\xe9dico",1!==e.total_medicos?"s":""]})]})]}),t&&(0,s.jsx)("div",{className:"flex items-center justify-center w-6 h-6 bg-green-500 rounded-full shadow-sm",children:(0,s.jsx)(n.Z,{className:"w-3.5 h-3.5 text-white"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-1.5 pt-1.5 border-t border-gray-200",children:[(0,s.jsx)("div",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(o>5?"bg-green-100 text-green-800":o>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:o>0?"".concat(o," vaga").concat(1!==o?"s":""):"Sem vagas"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[e.consultas_marcadas," agendada",1!==e.consultas_marcadas?"s":""]})]})]},"".concat(e.data,"-").concat(a))})}),t>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>q(e=>Math.max(1,e-1)),disabled:1===I,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),"Anterior"]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["P\xe1gina ",(0,s.jsx)("strong",{children:I})," de ",(0,s.jsx)("strong",{children:t})]})}),(0,s.jsxs)("button",{type:"button",onClick:()=>q(e=>Math.min(t,e+1)),disabled:I===t,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Pr\xf3xima",(0,s.jsx)(x.Z,{className:"w-4 h-4"})]})]})]})})()]}),L.data_consulta&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-green-800",children:[(0,s.jsx)(n.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsxs)("span",{className:"text-sm font-semibold",children:["Data selecionada: ",(0,s.jsx)("strong",{className:"text-green-900",children:(0,b.p6)(L.data_consulta,"EEEE, dd/MM/yyyy")})]})]})})]}),M&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-red-900 mb-1",children:"Voc\xea j\xe1 possui uma consulta agendada desta especialidade"}),(0,s.jsxs)("p",{className:"text-sm text-red-800",children:["Voc\xea j\xe1 tem uma consulta de ",(0,s.jsx)("strong",{children:L.especialidade})," agendada para o dia ",(0,s.jsx)("strong",{children:(0,b.p6)(L.data_consulta,"EEEE, dd/MM/yyyy")}),". Por favor, escolha outra data ou especialidade."]})]})]})}),L.especialidade&&L.data_consulta&&!M&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsxs)("p",{className:"text-sm text-blue-900",children:["O m\xe9dico ser\xe1 atribu\xeddo automaticamente entre os dispon\xedveis da especialidade ",(0,s.jsx)("strong",{children:L.especialidade})," no dia selecionado."]})]})}),(0,s.jsx)("div",{className:"mt-6 mb-4",children:(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-blue-400 transition-all",children:[(0,s.jsx)("input",{type:"checkbox",checked:L.consulta_online,onChange:e=>V({...L,consulta_online:e.target.checked}),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:"Consulta Online"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Realize sua consulta por videoconfer\xeancia sem sair de casa"})]})]})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es (Opcional)"}),(0,s.jsx)("textarea",{value:L.observacoes,onChange:e=>V({...L,observacoes:e.target.value}),rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",placeholder:"Descreva brevemente o motivo da consulta..."})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)("button",{type:"submit",disabled:t||!L.especialidade||!L.data_consulta||!!M,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 animate-spin"}),"Agendando..."]}):(0,s.jsxs)(s.Fragment,{children:["Confirmar Agendamento",(0,s.jsx)(n.Z,{className:"w-5 h-5"})]})})})]})]})]})})}},9173:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(7437),r=t(3523);function n(e){let{children:a,label:t,error:n,icon:l,className:i="",options:o,...c}=e;return(0,s.jsxs)("div",{className:t?"w-full":"",children:[t&&(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,c.required&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[l&&(0,s.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none z-10",children:l}),(0,s.jsx)("select",{...c,className:"\n            ".concat(t?"w-full":"min-w-[140px]"," \n            ").concat(l?"pl-10":"pl-3"," \n            pr-10 \n            py-2.5 \n            border \n            border-gray-300 \n            rounded-lg \n            bg-white\n            text-sm\n            text-gray-900\n            font-medium\n            appearance-none\n            cursor-pointer\n            transition-all\n            duration-200\n            focus:ring-2 \n            focus:ring-green-500/50\n            focus:border-green-500 \n            outline-none\n            hover:border-gray-400\n            hover:bg-gray-50\n            disabled:bg-gray-100 \n            disabled:cursor-not-allowed\n            disabled:text-gray-500\n            disabled:border-gray-200\n            ").concat(n?"border-red-500 focus:border-red-500 focus:ring-red-500/50":"","\n            ").concat(i,"\n          "),children:o?o.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value)):a}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-500",children:(0,s.jsx)(r.Z,{className:"w-4 h-4"})})]}),n&&(0,s.jsxs)("p",{className:"mt-1.5 text-xs text-red-600 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"âš "}),n]})]})}},3242:function(e,a,t){"use strict";t.d(a,{A:function(){return g},I:function(){return h}});var s=t(7437),r=t(2265),n=t(3008),l=t(1981),i=t(2894),o=t(4056),c=t(2549);let d=0,m=[],u=[],x=()=>{m.forEach(e=>e([...u]))},g={show:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s="toast-".concat(++d);return u.push({id:s,message:e,type:a,duration:t}),x(),t>0&&setTimeout(()=>{g.remove(s)},t),s},success:(e,a)=>g.show(e,"success",a),error:(e,a)=>g.show(e,"error",a),info:(e,a)=>g.show(e,"info",a),warning:(e,a)=>g.show(e,"warning",a),remove:e=>{u=u.filter(a=>a.id!==e),x()}};function h(){let[e,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=e=>{a(e)};return m.push(e),a([...u]),()=>{m=m.filter(a=>a!==e)}},[]);let t=e=>{switch(e){case"success":return(0,s.jsx)(n.Z,{className:"w-5 h-5 text-green-600"});case"error":return(0,s.jsx)(l.Z,{className:"w-5 h-5 text-red-600"});case"warning":return(0,s.jsx)(i.Z,{className:"w-5 h-5 text-yellow-600"});default:return(0,s.jsx)(o.Z,{className:"w-5 h-5 text-blue-600"})}},d=e=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return 0===e.length?null:(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md w-full",children:e.map(e=>(0,s.jsxs)("div",{className:"\n            ".concat(d(e.type),"\n            border-2 rounded-xl shadow-lg p-4 flex items-start gap-3\n            animate-in slide-in-from-right-full duration-300\n            backdrop-blur-sm\n          "),children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:t(e.type)}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("p",{className:"text-sm font-semibold break-words",children:e.message})}),(0,s.jsx)("button",{onClick:()=>e.remove(e.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]},e.id))})}},5950:function(e,a,t){"use strict";t.d(a,{cn:function(){return l},p6:function(){return n}});var s=t(3826),r=t(2836);let n=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd/MM/yyyy";try{let t="string"==typeof e?new Date(e):e;return(0,s.WU)(t,a,{locale:r.F})}catch(a){return e.toString()}},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(Boolean).join(" ")}},622:function(e,a,t){"use strict";var s=t(2265),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,a,t){var s,n={},c=null,d=null;for(s in void 0!==t&&(c=""+t),void 0!==a.key&&(c=""+a.key),void 0!==a.ref&&(d=a.ref),a)l.call(a,s)&&!o.hasOwnProperty(s)&&(n[s]=a[s]);if(e&&e.defaultProps)for(s in a=e.defaultProps)void 0===n[s]&&(n[s]=a[s]);return{$$typeof:r,type:e,key:c,ref:d,props:n,_owner:i.current}}a.Fragment=n,a.jsx=c,a.jsxs=c},7437:function(e,a,t){"use strict";e.exports=t(622)}},function(e){e.O(0,[8481,2971,4938,1744],function(){return e(e.s=1352)}),_N_E=e.O()}]);