(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2766],{2898:function(e,o,r){"use strict";r.d(o,{Z:function(){return i}});var t=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,o)=>{let r=(0,t.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:c,className:l="",children:d,...u},m)=>(0,t.createElement)("svg",{ref:m,...n,width:i,height:i,stroke:r,strokeWidth:c?24*Number(s)/Number(i):s,className:["lucide",`lucide-${a(e)}`,l].join(" "),...u},[...o.map(([e,o])=>(0,t.createElement)(e,o)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},1981:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6264:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7803:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},4043:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},5750:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9292:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},8339:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},2549:function(e,o,r){"use strict";r.d(o,{Z:function(){return t}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2481:function(e,o,r){"use strict";r.d(o,{Z:function(){return f}});var t=r(7437),n=r(2265),a=r(8339),i=r(5750),s=r(2549),c=r(6264),l=r(7803),d=r(4043),u=r(9292),m=r(100);function f(e){let{isOpen:o,onClose:f,consultaId:h,nomeUsuario:w,roomUrl:p,token:y}=e,g=(0,n.useRef)(null),v=(0,n.useRef)(null),x=(0,n.useRef)(!1),[b,C]=(0,n.useState)(!0),[E,T]=(0,n.useState)(null),[k,D]=(0,n.useState)(!1),[j,N]=(0,n.useState)([]),[P,_]=(0,n.useState)(!1),[A,R]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!o||!h||!p||!y){console.log("Aguardando dados para inicializar:",{isOpen:o,consultaId:h,hasRoomUrl:!!p,hasToken:!!y});return}console.log("Iniciando Daily.co para paciente:",{consultaId:h,roomUrl:p,hasToken:!!y,tokenLength:null==y?void 0:y.length});let e=!0,t=async()=>{var o,t,n,a,i,s;if(console.log("initializeDaily chamado"),x.current){console.warn("Inicializa\xe7\xe3o j\xe1 em andamento, ignorando...");return}console.log("Verificando suporte ao WebRTC...");{let e=!!(window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection),r=!!((null===(o=navigator.mediaDevices)||void 0===o?void 0:o.getUserMedia)||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia);if(console.log("Resultado verifica\xe7\xe3o WebRTC:",{hasWebRTC:e,hasGetUserMedia:r}),!e){console.error("WebRTC n\xe3o suportado!",{hasWebRTC:e,hasGetUserMedia:r}),T("Seu navegador n\xe3o suporta videoconfer\xeancia (WebRTC). Por favor, use um navegador moderno como Chrome, Firefox, Safari ou Edge."),C(!1),x.current=!1;return}r||console.warn("getUserMedia n\xe3o detectado imediatamente, mas continuando. O Daily.co solicitar\xe1 permiss\xf5es quando necess\xe1rio.");let t="https:"===window.location.protocol||"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.startsWith("192.")||window.location.hostname.startsWith("172.")||window.location.hostname.startsWith("10.");console.log("Verifica\xe7\xe3o de seguran\xe7a:",{protocol:window.location.protocol,hostname:window.location.hostname,isSecure:t}),t||console.warn("WebRTC pode n\xe3o funcionar em HTTP. Recomendado usar HTTPS ou acessar via localhost/IP local.")}if(console.log("Verifica\xe7\xe3o de WebRTC conclu\xedda, continuando..."),console.log("Verificando se outra inst\xe2ncia est\xe1 sendo criada..."),m._.isCreating()&&(console.warn("Outra inst\xe2ncia est\xe1 sendo criada, aguardando..."),await new Promise(e=>setTimeout(e,2e3)),m._.isCreating()))throw Error("Outra inst\xe2ncia do Daily.co est\xe1 sendo criada. Aguarde e tente novamente.");console.log("Marcando inicializa\xe7\xe3o como em andamento..."),x.current=!0,m._.setCreating(!0);try{console.log("Destruindo inst\xe2ncias ativas do Daily.co..."),await m._.destroyActiveInstance(),await new Promise(e=>setTimeout(e,1e3)),console.log("Inst\xe2ncias ativas destru\xeddas")}catch(e){console.warn("Erro ao destruir inst\xe2ncias ativas:",e)}try{if(console.log("Iniciando processo de inicializa\xe7\xe3o..."),C(!0),T(null),!e){console.warn("Componente desmontado durante inicializa\xe7\xe3o");return}if(v.current){try{console.log("Destruindo inst\xe2ncia anterior do Daily.co..."),v.current.destroy(),await new Promise(e=>setTimeout(e,1e3))}catch(e){console.warn("Erro ao destruir inst\xe2ncia anterior:",e)}v.current=null}if(g.current&&(g.current.querySelectorAll("iframe").forEach(e=>{try{e.remove()}catch(e){console.warn("Erro ao remover iframe:",e)}}),g.current.innerHTML="",g.current.offsetHeight),await new Promise(e=>setTimeout(e,1500)),!e){console.warn("Componente desmontado ap\xf3s limpeza");return}if(!g.current)throw console.error("Container foi removido ap\xf3s limpeza"),Error("Container n\xe3o est\xe1 dispon\xedvel ap\xf3s limpeza");if(!g.current.isConnected)throw console.error("Container n\xe3o est\xe1 conectado ao DOM"),Error("Container n\xe3o est\xe1 conectado ao DOM");if(!g.current||!g.current.isConnected)throw Error("Container do Daily.co n\xe3o est\xe1 dispon\xedvel");await new Promise(e=>setTimeout(e,300));let o=await r.e(1878).then(r.bind(r,9204)),t=null;if(o.default&&"function"==typeof o.default.createFrame)t=o.default;else if("function"==typeof o.createFrame)t=o;else if(o.DailyIframe&&"function"==typeof o.DailyIframe.createFrame)t=o.DailyIframe;else throw Error("Daily.co n\xe3o foi carregado corretamente");if("function"==typeof t.destroyAll)try{console.log("Destruindo todas as inst\xe2ncias do Daily.co..."),t.destroyAll(),await new Promise(e=>setTimeout(e,500))}catch(e){console.warn("Erro ao destruir todas as inst\xe2ncias:",e)}if(window.DailyIframe)try{let e=window.DailyIframe._instances||[];for(let o of(console.log("Inst\xe2ncias globais encontradas:",e.length),e))try{o&&"function"==typeof o.destroy&&o.destroy()}catch(e){console.warn("Erro ao destruir inst\xe2ncia global:",e)}await new Promise(e=>setTimeout(e,500))}catch(e){console.warn("Erro ao acessar inst\xe2ncias globais:",e)}if("function"==typeof t.load)try{await t.load()}catch(e){console.warn("Erro ao pr\xe9-carregar Daily.co:",e)}if(await new Promise(e=>setTimeout(e,500)),!g.current||!g.current.isConnected)throw Error("Container do Daily.co n\xe3o est\xe1 dispon\xedvel para criar o frame");let n=g.current.getBoundingClientRect();if(0===n.width||0===n.height){console.warn("Container tem dimens\xf5es zero, aguardando..."),await new Promise(e=>setTimeout(e,300));let e=g.current.getBoundingClientRect();if(0===e.width||0===e.height)throw Error("Container do Daily.co n\xe3o tem dimens\xf5es v\xe1lidas")}let a={showLeaveButton:!1,showFullscreenButton:!1,showParticipantsBar:!1,iframeStyle:{position:"absolute",width:"100%",height:"100%",border:"none"}};if(v.current){console.warn("Ainda h\xe1 uma inst\xe2ncia existente, destruindo antes de criar nova...");try{v.current.destroy(),await new Promise(e=>setTimeout(e,500))}catch(e){console.warn("Erro ao destruir inst\xe2ncia antes de criar:",e)}v.current=null}if(!g.current||!g.current.isConnected)throw Error("Container n\xe3o est\xe1 dispon\xedvel para criar o frame");g.current&&(g.current.innerHTML="",g.current.offsetHeight),await new Promise(e=>setTimeout(e,300));let i=0;for(;i<3;)try{if(window.DailyIframe)try{let e=window.DailyIframe;if(e._instances&&Array.isArray(e._instances)){for(let o of(console.log("Encontradas ".concat(e._instances.length," inst\xe2ncias globais, destruindo...")),e._instances))try{o&&"function"==typeof o.destroy&&o.destroy()}catch(e){}e._instances=[]}}catch(e){console.warn("N\xe3o foi poss\xedvel acessar inst\xe2ncias globais:",e)}if(await new Promise(e=>setTimeout(e,500)),!g.current||!g.current.isConnected)throw Error("Container n\xe3o est\xe1 dispon\xedvel");if(g.current&&(g.current.querySelectorAll("iframe").forEach(e=>e.remove()),g.current.innerHTML=""),await new Promise(e=>setTimeout(e,300)),window.DailyIframe){let e=window.DailyIframe;if(e._instances&&Array.isArray(e._instances)&&e._instances.length>0){for(let o of(console.warn("Ainda h\xe1 ".concat(e._instances.length," inst\xe2ncias globais antes da tentativa ").concat(i+1)),[...e._instances]))try{o&&"function"==typeof o.destroy&&o.destroy()}catch(e){}e._instances=[],await new Promise(e=>setTimeout(e,800))}}if(console.log("Tentativa ".concat(i+1," de criar inst\xe2ncia do Daily.co...")),!g.current)throw Error("Container n\xe3o est\xe1 dispon\xedvel (null)");if(!g.current.isConnected)throw Error("Container n\xe3o est\xe1 conectado ao DOM");let e=g.current.getBoundingClientRect();if(0===e.width||0===e.height){console.warn("Container tem dimens\xf5es zero, aguardando..."),await new Promise(e=>setTimeout(e,500));let e=g.current.getBoundingClientRect();if(0===e.width||0===e.height)throw Error("Container n\xe3o est\xe1 vis\xedvel (dimens\xf5es zero)")}""!==g.current.innerHTML.trim()&&(console.warn("Container n\xe3o est\xe1 vazio, limpando..."),g.current.innerHTML="",await new Promise(e=>setTimeout(e,300))),await new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(e)));try{if(!g.current||!g.current.isConnected)throw Error("Container foi removido antes de criar o frame");if(v.current=t.createFrame(g.current,a),v.current){console.log("Frame criado com sucesso na tentativa",i+1),m._.registerInstance(v.current);break}throw Error("createFrame retornou null")}catch(e){if(e.message&&(e.message.includes("WebRTC")||e.message.includes("suppressed"))&&(console.warn("Erro de WebRTC detectado ao criar frame, mas tentando continuar..."),i<1)){console.log("Primeira tentativa com erro de WebRTC, tentando novamente..."),i++,await new Promise(e=>setTimeout(e,2e3));continue}throw e}}catch(e){if(i++,console.error("Erro na tentativa ".concat(i,":"),e.message),e.message&&e.message.includes("Duplicate")){if(i<3){if(console.warn("Inst\xe2ncia duplicada detectada, tentando novamente (".concat(i,"/").concat(3,")...")),g.current){let e=g.current.parentElement;if(e){let o=document.createElement("div");o.className=g.current.className,o.style.cssText=g.current.style.cssText,o.setAttribute("ref","dailyContainerRef"),e.replaceChild(o,g.current),g.current=o}}await new Promise(e=>setTimeout(e,1500*i))}else{let e="N\xe3o foi poss\xedvel criar a videoconfer\xeancia. Isso pode acontecer se:\n1. H\xe1 outra videoconfer\xeancia aberta (feche todas as outras antes de abrir esta)\n2. A p\xe1gina precisa ser recarregada\n3. H\xe1 um problema com a conex\xe3o\n\nPor favor, feche todas as outras videoconfer\xeancias e tente novamente.";throw T(e),Error(e)}}else if(e.message&&(e.message.includes("WebRTC")||e.message.includes("not supported")||e.message.includes("suppressed"))){if(console.error("Erro de WebRTC do Daily.co:",e),console.warn("Erro de WebRTC detectado, mas tentando continuar..."),await new Promise(e=>setTimeout(e,1e3)),v.current)console.log("Frame foi criado mesmo com erro de WebRTC, continuando...");else{window.location.href;let e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,o="https:"===window.location.protocol;/^(192\.|172\.|10\.)/.test(window.location.hostname);let r="O navegador est\xe1 bloqueando o acesso \xe0 c\xe2mera/microfone porque o WebRTC requer HTTPS ou localhost.\n\n";throw o||e?r+="Por favor:\n\n1. Permita o acesso \xe0 c\xe2mera e microfone nas configura\xe7\xf5es do navegador\n2. Recarregue a p\xe1gina e tente novamente\n3. Verifique se o site est\xe1 acess\xedvel via HTTPS":r+="Solu\xe7\xf5es:\n\n1. Use HTTPS: Acesse via https://"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"\n2. Use localhost: Acesse via http://localhost:"+(window.location.port||"3000")+"\n3. Configure HTTPS no servidor (recomendado para produ\xe7\xe3o)\n\nNota: Navegadores modernos bloqueiam WebRTC em HTTP para IPs locais por seguran\xe7a.",T(r),C(!1),Error(r)}}else throw Error("Erro ao criar frame do Daily.co: "+(e.message||"Erro desconhecido"))}if(!v.current)throw Error("Falha ao criar frame do Daily.co ap\xf3s todas as tentativas");if(!v.current)throw Error("Falha ao criar frame do Daily.co - retornou null");if(await new Promise(e=>setTimeout(e,500)),!e){if(console.warn("Componente desmontado ap\xf3s criar frame"),v.current){try{v.current.destroy()}catch(e){}v.current=null}return}if(!v.current){if(console.warn("Frame foi destru\xeddo ap\xf3s cria\xe7\xe3o, tentando recriar..."),!e){console.warn("Componente desmontado, n\xe3o recriando frame");return}if(g.current&&g.current.isConnected&&(g.current.innerHTML="",await new Promise(e=>setTimeout(e,300))),!e)return;try{if(g.current&&g.current.isConnected){if(v.current=t.createFrame(g.current,a),!v.current)throw Error("Falha ao recriar frame do Daily.co");if(await new Promise(e=>setTimeout(e,500)),!e){if(v.current){try{v.current.destroy()}catch(e){}v.current=null}return}if(!v.current)throw Error("Frame do Daily.co foi destru\xeddo novamente ap\xf3s recria\xe7\xe3o")}else throw Error("Container n\xe3o est\xe1 dispon\xedvel para recriar o frame")}catch(e){throw console.error("Erro ao recriar frame:",e),Error("N\xe3o foi poss\xedvel criar o frame do Daily.co ap\xf3s m\xfaltiplas tentativas")}}if(!v.current)throw Error("Frame do Daily.co n\xe3o est\xe1 dispon\xedvel para configurar event listeners");if("function"!=typeof v.current.on)throw Error("M\xe9todo on n\xe3o est\xe1 dispon\xedvel no Daily.co");if(v.current.on("loaded",()=>{console.log("Daily.co iframe carregado")}).on("joined-meeting",e=>{console.log("Entrou na reuni\xe3o:",e),D(!0),N(Array.isArray(e.participants)?e.participants:[]),C(!1)}).on("participant-joined",e=>{console.log("Participante entrou:",e),N(o=>[...Array.isArray(o)?o:[],e.participant])}).on("participant-left",e=>{console.log("Participante saiu:",e),N(o=>(Array.isArray(o)?o:[]).filter(o=>o.user_id!==e.participant.user_id))}).on("error",e=>{console.error("Erro no Daily.co:",e);let o="Erro na videoconfer\xeancia";"account-missing-payment-method"===e.errorMsg?o="A conta Daily.co precisa de um m\xe9todo de pagamento configurado.":"Load failed"===e.errorMsg?o="N\xe3o foi poss\xedvel carregar a videoconfer\xeancia. Verifique sua conex\xe3o.":e.errorMsg&&(o="Erro na videoconfer\xeancia: "+e.errorMsg),T(o),C(!1)}).on("left-meeting",()=>{console.log("Saiu da reuni\xe3o"),D(!1),f()}),!v.current)throw Error("Frame do Daily.co foi perdido antes do join");if("function"!=typeof v.current.join)throw Error("M\xe9todo join n\xe3o est\xe1 dispon\xedvel no Daily.co");if(await new Promise(e=>setTimeout(e,500)),console.log("Tentando fazer join:",{hasFrame:!!v.current,roomUrl:p,hasToken:!!y,tokenLength:null==y?void 0:y.length,userName:w}),!p||!y)throw Error("URL da sala ou token n\xe3o fornecidos");if(await v.current.join({url:p,token:y,userName:w}),console.log("Join realizado com sucesso"),v.current&&"function"==typeof v.current.setLocalVideo)try{await v.current.setLocalVideo(!0),console.log("V\xeddeo local ativado (paciente)")}catch(e){console.warn("Erro ao ativar v\xeddeo local (paciente):",e)}if(v.current&&"function"==typeof v.current.setLocalAudio)try{await v.current.setLocalAudio(!0),console.log("\xc1udio local ativado (paciente)")}catch(e){console.warn("Erro ao ativar \xe1udio local (paciente):",e)}}catch(r){console.error("Erro ao inicializar Daily.co:",r),console.error("Detalhes do erro:",{message:r.message,stack:r.stack,roomUrl:p,hasToken:!!y,consultaId:h});let o="Erro ao inicializar videoconfer\xeancia: "+(r.message||"Erro desconhecido");(null===(t=r.message)||void 0===t?void 0:t.includes("WebRTC"))?o="Seu navegador n\xe3o suporta videoconfer\xeancia. Use Chrome, Firefox, Safari ou Edge.":(null===(n=r.message)||void 0===n?void 0:n.includes("token"))?o="Erro ao validar acesso. Verifique se o NIF est\xe1 correto e tente novamente.":(null===(a=r.message)||void 0===a?void 0:a.includes("sala"))||(null===(i=r.message)||void 0===i?void 0:i.includes("room"))?o="Erro ao acessar a sala de videoconfer\xeancia. Tente novamente ou entre em contato com o hospital.":(null===(s=r.message)||void 0===s?void 0:s.includes("Duplicate"))&&(o="N\xe3o \xe9 poss\xedvel abrir m\xfaltiplas videoconfer\xeancias ao mesmo tempo.\n\nPor favor:\n1. Feche todas as outras videoconfer\xeancias abertas\n2. Recarregue a p\xe1gina se necess\xe1rio\n3. Tente novamente"),e&&(T(o),C(!1))}finally{x.current=!1,m._.setCreating(!1)}};return p&&y?(console.log("Chamando initializeDaily com dados completos"),t()):console.warn("N\xe3o foi poss\xedvel inicializar: faltam roomUrl ou token",{roomUrl:p,hasToken:!!y}),()=>{if(console.log("Cleanup: desmontando componente Daily.co"),e=!1,x.current=!1,m._.setCreating(!1),g.current)try{g.current.querySelectorAll("iframe").forEach(e=>{try{e.remove()}catch(e){console.warn("Erro ao remover iframe no cleanup:",e)}}),g.current.innerHTML=""}catch(e){console.warn("Erro ao limpar container no cleanup:",e)}if(v.current)try{v.current.destroy(),setTimeout(()=>{m._.unregisterInstance(v.current),v.current=null},500)}catch(e){console.warn("Erro ao destruir Daily.co no cleanup:",e),v.current=null}}},[o,h,p,y,w,f]);let M=()=>{if(v.current&&"function"==typeof v.current.leave)try{v.current.leave()}catch(e){console.error("Erro ao sair da chamada:",e)}f()};if(!o)return null;let I=j.length+(k?1:0);return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:(0,t.jsxs)("div",{className:"relative w-full h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(a.Z,{className:"w-5 h-5 text-white"}),(0,t.jsxs)("h2",{className:"text-white font-semibold",children:["Videoconfer\xeancia - ",w]}),(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded-full font-semibold",children:"Paciente"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-white text-sm",children:[(0,t.jsx)(i.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[I," participante(s)"]})]}),(0,t.jsx)("button",{onClick:M,className:"text-white hover:text-gray-300 transition-colors p-2 hover:bg-white/10 rounded-lg",title:"Sair",children:(0,t.jsx)(s.Z,{className:"w-5 h-5"})})]})]}),(b||E)&&(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center bg-black z-20",children:[b&&(0,t.jsxs)("div",{className:"text-center text-white",children:[(0,t.jsx)(c.Z,{className:"w-12 h-12 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-lg",children:"Conectando \xe0 videoconfer\xeancia..."})]}),E&&(0,t.jsx)("div",{className:"text-center text-white max-w-md mx-auto px-4",children:(0,t.jsxs)("div",{className:"bg-red-600/20 border border-red-500 rounded-lg p-6",children:[(0,t.jsx)("p",{className:"text-red-200 mb-4",children:E}),(0,t.jsx)("button",{onClick:f,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Fechar"})]})})]}),(0,t.jsx)("div",{ref:g,className:"flex-1 w-full h-full relative",style:{minWidth:"100%",minHeight:"100%"}}),k&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-10 bg-gradient-to-t from-black/80 to-transparent px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>{if(v.current&&"function"==typeof v.current.setLocalAudio)try{let e=!P;v.current.setLocalAudio(!e),_(e)}catch(e){console.error("Erro ao alternar \xe1udio:",e)}},className:"p-3 rounded-full transition-colors ".concat(P?"bg-red-600 hover:bg-red-700 text-white":"bg-white/20 hover:bg-white/30 text-white"),title:P?"Ativar microfone":"Desativar microfone",children:P?(0,t.jsx)(l.Z,{className:"w-5 h-5"}):(0,t.jsx)(d.Z,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>{if(v.current&&"function"==typeof v.current.setLocalVideo)try{let e=!A;v.current.setLocalVideo(!e),R(e)}catch(e){console.error("Erro ao alternar v\xeddeo:",e)}},className:"p-3 rounded-full transition-colors ".concat(A?"bg-red-600 hover:bg-red-700 text-white":"bg-white/20 hover:bg-white/30 text-white"),title:A?"Ativar v\xeddeo":"Desativar v\xeddeo",children:A?(0,t.jsx)(u.Z,{className:"w-5 h-5"}):(0,t.jsx)(a.Z,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:M,className:"p-3 bg-red-600 hover:bg-red-700 text-white rounded-full transition-colors",title:"Sair da chamada",children:(0,t.jsx)(s.Z,{className:"w-5 h-5"})})]})})]})})}},100:function(e,o,r){"use strict";r.d(o,{_:function(){return a}});let t=null,n=!1,a={hasActiveInstance:()=>null!==t,registerInstance(e){if(t&&t!==e){console.warn("J\xe1 existe uma inst\xe2ncia ativa, destruindo antes de registrar nova...");try{t.destroy()}catch(e){console.warn("Erro ao destruir inst\xe2ncia anterior:",e)}}t=e},unregisterInstance(e){t===e&&(t=null)},async destroyActiveInstance(){if(t){try{await t.destroy()}catch(e){console.warn("Erro ao destruir inst\xe2ncia ativa:",e)}t=null}try{if(window.DailyIframe){let e=window.DailyIframe;if(e._instances&&Array.isArray(e._instances)){for(let o of[...e._instances])try{o&&"function"==typeof o.destroy&&await o.destroy()}catch(e){}e._instances=[]}}}catch(e){console.warn("Erro ao limpar inst\xe2ncias globais:",e)}},isCreating:()=>n,setCreating(e){n=e},getActiveInstance:()=>t}},622:function(e,o,r){"use strict";var t=r(2265),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,o,r){var t,a={},l=null,d=null;for(t in void 0!==r&&(l=""+r),void 0!==o.key&&(l=""+o.key),void 0!==o.ref&&(d=o.ref),o)i.call(o,t)&&!c.hasOwnProperty(t)&&(a[t]=o[t]);if(e&&e.defaultProps)for(t in o=e.defaultProps)void 0===a[t]&&(a[t]=o[t]);return{$$typeof:n,type:e,key:l,ref:d,props:a,_owner:s.current}}o.Fragment=a,o.jsx=l,o.jsxs=l},7437:function(e,o,r){"use strict";e.exports=r(622)},4033:function(e,o,r){e.exports=r(5313)}}]);